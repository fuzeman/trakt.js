{"version":3,"sources":["webpack/universalModuleDefinition","trakt.min.js","webpack/bootstrap 899bb0235d8c97256cf8","./src/index.js","./src/core/helpers.js","external \"lodash-amd/merge\"","./src/core/http.js","external \"querystring\"","./src/interfaces/index.js","./src/interfaces/users/settings.js","./src/interfaces/base.js","./src/interfaces/oauth.js","./src/interfaces/scrobble.js","./src/interfaces/search.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_3__","__WEBPACK_EXTERNAL_MODULE_5__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","Client","RefreshDisableAt","RefreshAt","Build","undefined","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_helpers","_http","_http2","_interfaces","_interfaces2","_base","_base2","Version","Date","isDefined","fetch","console","error","Promise","secret","options","setDefaults","debug","onSessionRefreshed","session","sessionKey","application","name","version","date","build","http","_initialized","_refreshing","resolve","initialize","_constructInterfaces","_this","refresh","then","isFunction","reject","Error","created_at","expires_in","warn","rem","Math","round","now","abs","_refreshSession","getSession","interfaces","_this2","result","keys","forEach","_this3","refresh_token","redirect_uri","oauth","stack","get","fragments","baseUrl","split","names","shift","join","toString","isString","defaults","_merge2","_merge","_extends","assign","arguments","source","hasOwnProperty","_querystring","_querystring2","HttpClient","client","_client","_baseUrl","path","request","method","headers","params","body","bodyType","authenticated","includeAppParameters","message","access_token","_buildUserAgent","JSON","stringify","encodeParameters","response","json","parameters","encode","filter","fragment","SearchInterface","ScrobbleInterface","OAuthInterface","UserSettingsInterface","_settings","_settings2","_oauth","_oauth2","_scrobble","_scrobble2","_search","_search2","users","settings","scrobble","search","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_Interface","getPrototypeOf","apply","Interface","redirectUri","state","siteUrl","client_id","response_type","code","post","client_secret","grant_type","refreshToken","item","progress","type","id_type","query","year"],"mappings":"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","file":"trakt.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash-amd/merge\"), require(\"querystring\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash-amd/merge\", \"querystring\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"trakt\"] = factory(require(\"lodash-amd/merge\"), require(\"querystring\"));\n\telse\n\t\troot[\"trakt\"] = factory(root[\"lodash-amd/merge\"], root[\"querystring\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_5__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash-amd/merge\"), require(\"querystring\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash-amd/merge\", \"querystring\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"trakt\"] = factory(require(\"lodash-amd/merge\"), require(\"querystring\"));\n\telse\n\t\troot[\"trakt\"] = factory(root[\"lodash-amd/merge\"], root[\"querystring\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_5__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.Client = exports.RefreshDisableAt = exports.RefreshAt = exports.Build = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _helpers = __webpack_require__(2);\n\t\n\tvar _http = __webpack_require__(4);\n\t\n\tvar _http2 = _interopRequireDefault(_http);\n\t\n\tvar _interfaces = __webpack_require__(6);\n\t\n\tvar _interfaces2 = _interopRequireDefault(_interfaces);\n\t\n\tvar _base = __webpack_require__(8);\n\t\n\tvar _base2 = _interopRequireDefault(_base);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Build = exports.Build = {\n\t    Version: '2.0.0-alpha.2',\n\t    Date: '2016-10-01'\n\t};\n\t\n\tvar RefreshAt = exports.RefreshAt = 7 * 24 * 60 * 60; // Refresh token one week before expiry\n\tvar RefreshDisableAt = exports.RefreshDisableAt = -28 * 24 * 60 * 60; // Disable refresh attempts after four weeks\n\t\n\t// Validate environment\n\tif (!(0, _helpers.isDefined)(fetch)) {\n\t    console.error('\"fetch\" is not available, include whatwg-fetch to support this environment');\n\t}\n\t\n\tif (!(0, _helpers.isDefined)(Promise)) {\n\t    console.error('\"Promise\" is not available, include babel-polyfill to support this environment');\n\t}\n\t\n\tvar Client = exports.Client = function () {\n\t    function Client(key, secret, options) {\n\t        _classCallCheck(this, Client);\n\t\n\t        options = (0, _helpers.setDefaults)(options, {\n\t            debug: false,\n\t\n\t            onSessionRefreshed: null,\n\t\n\t            session: null,\n\t            sessionKey: null\n\t        });\n\t\n\t        // Application keys\n\t        this.key = key || null;\n\t        this.secret = secret || null;\n\t\n\t        // Application metadata\n\t        this.application = {\n\t            name: 'trakt.js',\n\t            version: Build.Version,\n\t            date: Build.Date\n\t        };\n\t\n\t        // Build metadata\n\t        this.build = Build;\n\t\n\t        // Session\n\t        this.session = null;\n\t\n\t        if ((0, _helpers.isDefined)(options.session)) {\n\t            this.session = options.session;\n\t        } else if ((0, _helpers.isDefined)(options.sessionKey)) {\n\t            this.session = { key: options.sessionKey };\n\t        }\n\t\n\t        // Callbacks\n\t        this.onSessionRefreshed = options.onSessionRefreshed;\n\t\n\t        // Public variables\n\t        this.debug = options.debug;\n\t        this.http = null;\n\t\n\t        // Private variables\n\t        this._initialized = false;\n\t        this._interfaces = {};\n\t        this._refreshing = Promise.resolve();\n\t\n\t        // Initialize client\n\t        this.initialize();\n\t    }\n\t\n\t    _createClass(Client, [{\n\t        key: 'initialize',\n\t        value: function initialize() {\n\t            if (this._initialized) {\n\t                return;\n\t            }\n\t\n\t            // Construct http client\n\t            this.http = new _http2.default(this);\n\t\n\t            // Construct interfaces\n\t            this._interfaces = this._constructInterfaces(_interfaces2.default);\n\t\n\t            // Mark client as initialized\n\t            this._initialized = true;\n\t        }\n\t    }, {\n\t        key: 'getSession',\n\t\n\t\n\t        // endregion\n\t\n\t        // region Public methods\n\t\n\t        value: function getSession(options) {\n\t            var _this = this;\n\t\n\t            options = (0, _helpers.setDefaults)(options, {\n\t                refresh: true\n\t            });\n\t\n\t            return this._refreshing.then(function () {\n\t                var session = _this.session;\n\t\n\t                if (!(0, _helpers.isDefined)(session)) {\n\t                    return Promise.reject(new Error('No session available'));\n\t                }\n\t\n\t                if ((0, _helpers.isFunction)(session)) {\n\t                    session = session();\n\t                }\n\t\n\t                // Resolve session\n\t                return Promise.resolve(session).then(function (session) {\n\t                    if (!(0, _helpers.isDefined)(session)) {\n\t                        return Promise.reject(new Error('No session available'));\n\t                    }\n\t\n\t                    if (!(0, _helpers.isDefined)(session.created_at) || !(0, _helpers.isDefined)(session.expires_in)) {\n\t                        console.warn('Missing session expiry properties, unable to determine session validity');\n\t                    }\n\t\n\t                    // Calculate seconds to/since session expire time\n\t                    var rem = Math.round(session.created_at + session.expires_in - Date.now() / 1000);\n\t\n\t                    if (rem > RefreshAt) {\n\t                        // Ensure the \"onSessionRefreshed\" callback has been defined\n\t                        if (!(0, _helpers.isDefined)(_this.onSessionRefreshed)) {\n\t                            console.warn('onSessionRefreshed callback hasn\\'t been implemented, session will expire in %d second(s)', Math.round(rem));\n\t                        }\n\t                    } else {\n\t                        if (rem < RefreshDisableAt) {\n\t                            // Session has expired, and no `onSessionRefreshed` callback has been defined\n\t                            return Promise.reject(new Error('Session expired ' + Math.round(Math.abs(rem)) + ' second(s) ago'));\n\t                        }\n\t\n\t                        if (!(0, _helpers.isDefined)(_this.onSessionRefreshed)) {\n\t                            if (rem < 0) {\n\t                                // Session has expired\n\t                                return Promise.reject(new Error('Session expired ' + Math.round(Math.abs(rem)) + ' second(s) ago'));\n\t                            }\n\t\n\t                            console.warn('onSessionRefreshed callback hasn\\'t been implemented, unable to refresh session');\n\t                            return session;\n\t                        }\n\t\n\t                        if (rem < 0) {\n\t                            // Session has expired, and no `onSessionRefreshed` callback has been defined\n\t                            console.warn('Session expired ' + Math.round(Math.abs(rem)) + ' second(s) ago');\n\t                        }\n\t\n\t                        if (!options.refresh) {\n\t                            console.warn('Token refresh has been disabled');\n\t                            return session;\n\t                        }\n\t\n\t                        // Refresh authentication token\n\t                        _this._refreshing = _this._refreshSession(session);\n\t\n\t                        // Wait for token to refresh, then try retrieve the session again\n\t                        return _this._refreshing.then(function () {\n\t                            return _this.getSession({\n\t                                refresh: false\n\t                            });\n\t                        });\n\t                    }\n\t\n\t                    // Return current session\n\t                    return session;\n\t                });\n\t            });\n\t        }\n\t\n\t        // endregion\n\t\n\t        // region Private methods\n\t\n\t    }, {\n\t        key: '_constructInterfaces',\n\t        value: function _constructInterfaces(interfaces) {\n\t            var _this2 = this;\n\t\n\t            var result = {};\n\t            var value;\n\t\n\t            Object.keys(interfaces).forEach(function (key) {\n\t                value = interfaces[key];\n\t\n\t                if (value.prototype instanceof _base2.default) {\n\t                    result[key] = new value(_this2); // eslint-disable-line new-cap\n\t                } else {\n\t                    result[key] = _this2._constructInterfaces(value);\n\t                }\n\t            });\n\t\n\t            return result;\n\t        }\n\t    }, {\n\t        key: '_refreshSession',\n\t        value: function _refreshSession(session) {\n\t            var _this3 = this;\n\t\n\t            if (!(0, _helpers.isDefined)(session) || !(0, _helpers.isDefined)(session.refresh_token)) {\n\t                // Unable to refresh session\n\t                return Promise.reject(new Error('Unable to refresh session, no \"refresh_token\" property is available'));\n\t            }\n\t\n\t            if (!(0, _helpers.isDefined)(session.redirect_uri)) {\n\t                console.warn('Session has no \"redirect_uri\" property, defaulting to \"urn:ietf:wg:oauth:2.0:oob\"');\n\t            }\n\t\n\t            if (!(0, _helpers.isDefined)(this.onSessionRefreshed)) {\n\t                return Promise.reject(new Error('Unable to refresh session, onSessionRefreshed callback hasn\\'t been implemented'));\n\t            }\n\t\n\t            // Refresh session\n\t            return this.oauth.refresh(session.refresh_token, session.redirect_uri).then(function (session) {\n\t                if (!(0, _helpers.isDefined)(_this3.onSessionRefreshed)) {\n\t                    return;\n\t                }\n\t\n\t                // Fire \"onSessionRefreshed\" callback\n\t                _this3.onSessionRefreshed(session);\n\t            }, function (error) {\n\t                console.error('Unable to refresh session:', error.stack);\n\t            });\n\t        }\n\t\n\t        // endregion\n\t\n\t    }, {\n\t        key: 'siteUrl',\n\t        get: function get() {\n\t            var fragments = this.http.baseUrl.split('://'),\n\t                names = fragments[1].split('.');\n\t\n\t            // Remove first name ('api' or 'api-v2launch')\n\t            names.shift();\n\t\n\t            return [fragments[0], names.join('.')].join('://');\n\t        }\n\t\n\t        // region Interfaces\n\t\n\t    }, {\n\t        key: 'users',\n\t        get: function get() {\n\t            return this._interfaces['users'];\n\t        }\n\t    }, {\n\t        key: 'oauth',\n\t        get: function get() {\n\t            return this._interfaces['oauth'];\n\t        }\n\t    }, {\n\t        key: 'scrobble',\n\t        get: function get() {\n\t            return this._interfaces['scrobble'];\n\t        }\n\t    }, {\n\t        key: 'search',\n\t        get: function get() {\n\t            return this._interfaces['search'];\n\t        }\n\t    }]);\n\n\t    return Client;\n\t}();\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.isDefined = isDefined;\n\texports.isFunction = isFunction;\n\texports.isString = isString;\n\texports.setDefaults = setDefaults;\n\t\n\tvar _merge = __webpack_require__(3);\n\t\n\tvar _merge2 = _interopRequireDefault(_merge);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction isDefined(value) {\n\t    return typeof value !== 'undefined' && value !== null;\n\t}\n\t\n\tfunction isFunction(value) {\n\t    return isDefined(value) && {}.toString.call(value) === '[object Function]';\n\t}\n\t\n\tfunction isString(value) {\n\t    return isDefined(value) && {}.toString.call(value) === '[object String]';\n\t}\n\t\n\tfunction setDefaults(value, defaults) {\n\t    if (!isDefined(value)) {\n\t        return defaults;\n\t    }\n\t\n\t    return (0, _merge2.default)({}, defaults, value);\n\t}\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _helpers = __webpack_require__(2);\n\t\n\tvar _merge = __webpack_require__(3);\n\t\n\tvar _merge2 = _interopRequireDefault(_merge);\n\t\n\tvar _querystring = __webpack_require__(5);\n\t\n\tvar _querystring2 = _interopRequireDefault(_querystring);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar HttpClient = function () {\n\t    function HttpClient(client, baseUrl) {\n\t        _classCallCheck(this, HttpClient);\n\t\n\t        this._client = client;\n\t        this._baseUrl = baseUrl || 'https://api.trakt.tv/';\n\t    }\n\t\n\t    _createClass(HttpClient, [{\n\t        key: 'get',\n\t        value: function get(path, options) {\n\t            return this.request('GET', path, options);\n\t        }\n\t    }, {\n\t        key: 'post',\n\t        value: function post(path, options) {\n\t            return this.request('POST', path, options);\n\t        }\n\t    }, {\n\t        key: 'request',\n\t        value: function request(method, path, options) {\n\t            var _this = this;\n\t\n\t            options = (0, _merge2.default)({\n\t                headers: {},\n\t                params: {},\n\t\n\t                // Body\n\t                body: null,\n\t                bodyType: 'json',\n\t\n\t                // Authentication\n\t                authenticated: false,\n\t                session: null,\n\t\n\t                // Application\n\t                application: null,\n\t                includeAppParameters: false\n\t            }, options || {});\n\t\n\t            if (!(0, _helpers.isDefined)(options.application)) {\n\t                options.application = this._client.application;\n\t            }\n\t\n\t            // Set request headers\n\t            options.headers['trakt-api-key'] = this._client.key;\n\t            options.headers['trakt-api-version'] = 2;\n\t\n\t            // Authentication\n\t            if (options.authenticated) {\n\t                if (!(0, _helpers.isDefined)(options.session)) {\n\t                    // Retrieve current client session\n\t                    return this._client.getSession().then(function (session) {\n\t                        if (!(0, _helpers.isDefined)(session)) {\n\t                            // Invalid session returned\n\t                            return Promise.reject(new Error('Authentication required, but an invalid session was returned'));\n\t                        }\n\t\n\t                        // Fire request with `session`\n\t                        return _this.request(method, path, _extends({}, options, {\n\t                            session: session\n\t                        }));\n\t                    }, function (error) {\n\t                        // No session available\n\t                        return Promise.reject(new Error('Authentication required, but no session is available (error: ' + error.message + ')'));\n\t                    });\n\t                }\n\t\n\t                // Validate session\n\t                if (!(0, _helpers.isDefined)(options.session.access_token)) {\n\t                    return Promise.reject(new Error('Invalid session provided, expected an object with the \"access_token\" property'));\n\t                }\n\t\n\t                // Set authorization header\n\t                options.headers['Authorization'] = 'Bearer ' + options.session.access_token;\n\t            }\n\t\n\t            // Application metadata\n\t            if (!(0, _helpers.isDefined)(options.application)) {\n\t                options.application = {\n\t                    name: 'trakt.js',\n\t                    version: this._client.build.version,\n\t                    date: this._client.build.date\n\t                };\n\t            }\n\t\n\t            // Application parameters\n\t            if (options.includeAppParameters === true) {\n\t                // Validate request method\n\t                if (method !== 'POST') {\n\t                    return Promise.reject(new Error('\"includeAppParameters\" can only be used with POST requests'));\n\t                }\n\t\n\t                // Version\n\t                if ((0, _helpers.isDefined)(options.application.version)) {\n\t                    options.body['app_version'] = options.application.version;\n\t                }\n\t\n\t                // Date\n\t                if ((0, _helpers.isDefined)(options.application.date)) {\n\t                    options.body['app_date'] = options.application.date;\n\t                }\n\t            }\n\t\n\t            // User Agent\n\t            options.headers['User-Agent'] = this._buildUserAgent(options.application);\n\t\n\t            // Process body\n\t            if ((0, _helpers.isDefined)(options.body)) {\n\t                // Encode body as `bodyType`\n\t                if (options.bodyType === 'json') {\n\t                    options.body = JSON.stringify(options.body);\n\t                    options.headers['Content-Type'] = 'application/json';\n\t                } else {\n\t                    throw new Error('Invalid \"bodyType\" provided: \"' + options.bodyType + '\"');\n\t                }\n\t            }\n\t\n\t            if (this._client.debug) {\n\t                console.debug('[trakt.js] %s %o (options: %O)', method, path, options);\n\t            }\n\t\n\t            // Send request\n\t            return fetch(this._baseUrl + path + '?' + this.encodeParameters(options.params), {\n\t                method: method,\n\t                headers: options.headers,\n\t                body: options.body\n\t            }).then(function (response) {\n\t                // TODO check status code\n\t                return response.json();\n\t            });\n\t        }\n\t    }, {\n\t        key: 'encodeParameters',\n\t        value: function encodeParameters(parameters) {\n\t            // Remove undefined parameters\n\t            Object.keys(parameters).forEach(function (key) {\n\t                if (typeof parameters[key] === 'undefined') {\n\t                    delete parameters[key];\n\t                }\n\t            });\n\t\n\t            // Encode parameters to string\n\t            return _querystring2.default.encode(parameters);\n\t        }\n\t    }, {\n\t        key: '_buildUserAgent',\n\t        value: function _buildUserAgent(application) {\n\t            var result = '';\n\t\n\t            // Add application name (or \"Unknown\")\n\t            if ((0, _helpers.isDefined)(application.name)) {\n\t                result += application.name;\n\t            } else {\n\t                result += 'Unknown';\n\t            }\n\t\n\t            // Add fragments (version, date)\n\t            var fragments = [application.version, application.date].filter(function (fragment) {\n\t                return (0, _helpers.isDefined)(fragment);\n\t            });\n\t\n\t            if (fragments.length < 1) {\n\t                return result;\n\t            }\n\t\n\t            return result + ' (' + fragments.join('; ') + ')';\n\t        }\n\t    }, {\n\t        key: 'baseUrl',\n\t        get: function get() {\n\t            return this._baseUrl;\n\t        }\n\t    }]);\n\t\n\t    return HttpClient;\n\t}();\n\t\n\texports.default = HttpClient;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.SearchInterface = exports.ScrobbleInterface = exports.OAuthInterface = exports.UserSettingsInterface = undefined;\n\t\n\tvar _settings = __webpack_require__(7);\n\t\n\tvar _settings2 = _interopRequireDefault(_settings);\n\t\n\tvar _oauth = __webpack_require__(9);\n\t\n\tvar _oauth2 = _interopRequireDefault(_oauth);\n\t\n\tvar _scrobble = __webpack_require__(10);\n\t\n\tvar _scrobble2 = _interopRequireDefault(_scrobble);\n\t\n\tvar _search = __webpack_require__(11);\n\t\n\tvar _search2 = _interopRequireDefault(_search);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.UserSettingsInterface = _settings2.default;\n\texports.OAuthInterface = _oauth2.default;\n\texports.ScrobbleInterface = _scrobble2.default;\n\texports.SearchInterface = _search2.default;\n\texports.default = {\n\t    users: {\n\t        settings: _settings2.default\n\t    },\n\t\n\t    oauth: _oauth2.default,\n\t    scrobble: _scrobble2.default,\n\t    search: _search2.default\n\t};\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _base = __webpack_require__(8);\n\t\n\tvar _base2 = _interopRequireDefault(_base);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar UserSettingsInterface = function (_Interface) {\n\t    _inherits(UserSettingsInterface, _Interface);\n\t\n\t    function UserSettingsInterface() {\n\t        _classCallCheck(this, UserSettingsInterface);\n\t\n\t        return _possibleConstructorReturn(this, (UserSettingsInterface.__proto__ || Object.getPrototypeOf(UserSettingsInterface)).apply(this, arguments));\n\t    }\n\t\n\t    _createClass(UserSettingsInterface, [{\n\t        key: 'get',\n\t        value: function get(options) {\n\t            return this.http.get('users/settings', _extends({}, options, {\n\t                authenticated: true\n\t            }));\n\t        }\n\t    }]);\n\t\n\t    return UserSettingsInterface;\n\t}(_base2.default);\n\t\n\texports.default = UserSettingsInterface;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _helpers = __webpack_require__(2);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Interface = function () {\n\t    function Interface(client) {\n\t        _classCallCheck(this, Interface);\n\t\n\t        this._client = (0, _helpers.isDefined)(client) ? client : null;\n\t    }\n\t\n\t    _createClass(Interface, [{\n\t        key: 'http',\n\t        get: function get() {\n\t            if (!(0, _helpers.isDefined)(this._client)) {\n\t                return null;\n\t            }\n\t\n\t            return this._client.http;\n\t        }\n\t    }]);\n\t\n\t    return Interface;\n\t}();\n\t\n\texports.default = Interface;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _helpers = __webpack_require__(2);\n\t\n\tvar _base = __webpack_require__(8);\n\t\n\tvar _base2 = _interopRequireDefault(_base);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar OAuthInterface = function (_Interface) {\n\t    _inherits(OAuthInterface, _Interface);\n\t\n\t    function OAuthInterface() {\n\t        _classCallCheck(this, OAuthInterface);\n\t\n\t        return _possibleConstructorReturn(this, (OAuthInterface.__proto__ || Object.getPrototypeOf(OAuthInterface)).apply(this, arguments));\n\t    }\n\t\n\t    _createClass(OAuthInterface, [{\n\t        key: 'authorizeUrl',\n\t        value: function authorizeUrl(redirectUri, state) {\n\t            if (!(0, _helpers.isDefined)(this._client.key)) {\n\t                throw new Error('Missing required client \"key\" parameter');\n\t            }\n\t\n\t            return this._client.siteUrl + 'oauth/authorize?' + this.http.encodeParameters({\n\t                'client_id': this._client.key,\n\t\n\t                'response_type': 'code',\n\t                'redirect_uri': (0, _helpers.isDefined)(redirectUri) ? redirectUri : 'urn:ietf:wg:oauth:2.0:oob',\n\t                'state': state\n\t            });\n\t        }\n\t    }, {\n\t        key: 'exchange',\n\t        value: function exchange(code, redirectUri, options) {\n\t            if (!(0, _helpers.isDefined)(this._client.key)) {\n\t                throw new Error('Missing required client \"key\" parameter');\n\t            }\n\t\n\t            if (!(0, _helpers.isDefined)(this._client.secret)) {\n\t                throw new Error('Missing required client \"secret\" parameter');\n\t            }\n\t\n\t            if (!(0, _helpers.isDefined)(code)) {\n\t                throw new Error('Invalid value provided for the \"code\" parameter');\n\t            }\n\t\n\t            if (!(0, _helpers.isDefined)(redirectUri)) {\n\t                redirectUri = 'urn:ietf:wg:oauth:2.0:oob';\n\t            }\n\t\n\t            return this.http.post('oauth/token', _extends({}, options, {\n\t                body: {\n\t                    'client_id': this._client.key,\n\t                    'client_secret': this._client.secret,\n\t\n\t                    'code': code,\n\t                    'redirect_uri': redirectUri,\n\t                    'grant_type': 'authorization_code'\n\t                }\n\t            })).then(function (session) {\n\t                if (!(0, _helpers.isDefined)(session)) {\n\t                    return session;\n\t                }\n\t\n\t                session['redirect_uri'] = redirectUri;\n\t                return session;\n\t            });\n\t        }\n\t    }, {\n\t        key: 'refresh',\n\t        value: function refresh(refreshToken, redirectUri, options) {\n\t            if (!(0, _helpers.isDefined)(this._client.key)) {\n\t                throw new Error('Missing required client \"key\" parameter');\n\t            }\n\t\n\t            if (!(0, _helpers.isDefined)(this._client.secret)) {\n\t                throw new Error('Missing required client \"secret\" parameter');\n\t            }\n\t\n\t            if (!(0, _helpers.isDefined)(refreshToken)) {\n\t                throw new Error('Invalid value provided for the \"code\" parameter');\n\t            }\n\t\n\t            return this.http.post('oauth/token', _extends({}, options, {\n\t                body: {\n\t                    'client_id': this._client.key,\n\t                    'client_secret': this._client.secret,\n\t\n\t                    'refresh_token': refreshToken,\n\t                    'redirect_uri': (0, _helpers.isDefined)(redirectUri) ? redirectUri : 'urn:ietf:wg:oauth:2.0:oob',\n\t                    'grant_type': 'refresh_token'\n\t                }\n\t            }));\n\t        }\n\t    }]);\n\t\n\t    return OAuthInterface;\n\t}(_base2.default);\n\t\n\texports.default = OAuthInterface;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _base = __webpack_require__(8);\n\t\n\tvar _base2 = _interopRequireDefault(_base);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar ScrobbleInterface = function (_Interface) {\n\t    _inherits(ScrobbleInterface, _Interface);\n\t\n\t    function ScrobbleInterface() {\n\t        _classCallCheck(this, ScrobbleInterface);\n\t\n\t        return _possibleConstructorReturn(this, (ScrobbleInterface.__proto__ || Object.getPrototypeOf(ScrobbleInterface)).apply(this, arguments));\n\t    }\n\t\n\t    _createClass(ScrobbleInterface, [{\n\t        key: 'start',\n\t        value: function start(item, progress, options) {\n\t            return this.http.post('scrobble/start', _extends({}, options, {\n\t                authenticated: true,\n\t                includeAppParameters: true,\n\t\n\t                body: _extends({}, item, {\n\t                    progress: progress\n\t                })\n\t            }));\n\t        }\n\t    }, {\n\t        key: 'pause',\n\t        value: function pause(item, progress, options) {\n\t            return this.http.post('scrobble/pause', _extends({}, options, {\n\t                authenticated: true,\n\t                includeAppParameters: true,\n\t\n\t                body: _extends({}, item, {\n\t                    progress: progress\n\t                })\n\t            }));\n\t        }\n\t    }, {\n\t        key: 'stop',\n\t        value: function stop(item, progress, options) {\n\t            return this.http.post('scrobble/stop', _extends({}, options, {\n\t                authenticated: true,\n\t                includeAppParameters: true,\n\t\n\t                body: _extends({}, item, {\n\t                    progress: progress\n\t                })\n\t            }));\n\t        }\n\t    }]);\n\t\n\t    return ScrobbleInterface;\n\t}(_base2.default);\n\t\n\texports.default = ScrobbleInterface;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _helpers = __webpack_require__(2);\n\t\n\tvar _base = __webpack_require__(8);\n\t\n\tvar _base2 = _interopRequireDefault(_base);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar SearchInterface = function (_Interface) {\n\t    _inherits(SearchInterface, _Interface);\n\t\n\t    function SearchInterface() {\n\t        _classCallCheck(this, SearchInterface);\n\t\n\t        return _possibleConstructorReturn(this, (SearchInterface.__proto__ || Object.getPrototypeOf(SearchInterface)).apply(this, arguments));\n\t    }\n\t\n\t    _createClass(SearchInterface, [{\n\t        key: 'lookup',\n\t        value: function lookup(type, id, options) {\n\t            if (!(0, _helpers.isDefined)(type)) {\n\t                throw new Error('Invalid value provided for the \"type\" parameter');\n\t            }\n\t\n\t            if (!(0, _helpers.isDefined)(id)) {\n\t                throw new Error('Invalid value provided for the \"id\" parameter');\n\t            }\n\t\n\t            return this.http.get('search', _extends({}, options, {\n\t                params: {\n\t                    'id_type': type,\n\t                    'id': id\n\t                }\n\t            }));\n\t        }\n\t    }, {\n\t        key: 'query',\n\t        value: function query(_query, type, year, options) {\n\t            if (!(0, _helpers.isDefined)(_query)) {\n\t                throw new Error('Invalid value provided for the \"query\" parameter');\n\t            }\n\t\n\t            return this.http.get('search', _extends({}, options, {\n\t                params: {\n\t                    'query': _query,\n\t                    'type': type,\n\t                    'year': year\n\t                }\n\t            }));\n\t        }\n\t    }]);\n\t\n\t    return SearchInterface;\n\t}(_base2.default);\n\t\n\texports.default = SearchInterface;\n\tmodule.exports = exports['default'];\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** trakt.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 899bb0235d8c97256cf8\n **/","import {isDefined, isFunction, setDefaults} from './core/helpers';\r\nimport HttpClient from './core/http';\r\nimport Interfaces from './interfaces';\r\nimport Interface from './interfaces/base';\r\n\r\nexport const Build = {\r\n    Version: '2.0.0-alpha.2',\r\n    Date: '2016-10-01'\r\n};\r\n\r\nexport const RefreshAt = 7 * 24 * 60 * 60;  // Refresh token one week before expiry\r\nexport const RefreshDisableAt = -28 * 24 * 60 * 60;  // Disable refresh attempts after four weeks\r\n\r\n// Validate environment\r\nif(!isDefined(fetch)) {\r\n    console.error('\"fetch\" is not available, include whatwg-fetch to support this environment');\r\n}\r\n\r\nif(!isDefined(Promise)) {\r\n    console.error('\"Promise\" is not available, include babel-polyfill to support this environment');\r\n}\r\n\r\nexport class Client {\r\n    constructor(key, secret, options) {\r\n        options = setDefaults(options, {\r\n            debug: false,\r\n\r\n            onSessionRefreshed: null,\r\n\r\n            session: null,\r\n            sessionKey: null\r\n        });\r\n\r\n        // Application keys\r\n        this.key = key || null;\r\n        this.secret = secret || null;\r\n\r\n        // Application metadata\r\n        this.application = {\r\n            name: 'trakt.js',\r\n            version: Build.Version,\r\n            date: Build.Date\r\n        };\r\n\r\n        // Build metadata\r\n        this.build = Build;\r\n\r\n        // Session\r\n        this.session = null;\r\n\r\n        if(isDefined(options.session)) {\r\n            this.session = options.session;\r\n        } else if(isDefined(options.sessionKey)) {\r\n            this.session = {key: options.sessionKey};\r\n        }\r\n\r\n        // Callbacks\r\n        this.onSessionRefreshed = options.onSessionRefreshed;\r\n\r\n        // Public variables\r\n        this.debug = options.debug;\r\n        this.http = null;\r\n\r\n        // Private variables\r\n        this._initialized = false;\r\n        this._interfaces = {};\r\n        this._refreshing = Promise.resolve();\r\n\r\n        // Initialize client\r\n        this.initialize();\r\n    }\r\n\r\n    initialize() {\r\n        if(this._initialized) {\r\n            return;\r\n        }\r\n\r\n        // Construct http client\r\n        this.http = new HttpClient(this);\r\n\r\n        // Construct interfaces\r\n        this._interfaces = this._constructInterfaces(Interfaces);\r\n\r\n        // Mark client as initialized\r\n        this._initialized = true;\r\n    }\r\n\r\n    get siteUrl() {\r\n        var fragments = this.http.baseUrl.split('://'),\r\n            names = fragments[1].split('.');\r\n\r\n        // Remove first name ('api' or 'api-v2launch')\r\n        names.shift();\r\n\r\n        return [fragments[0], names.join('.')].join('://');\r\n    }\r\n\r\n    // region Interfaces\r\n\r\n    get users() {\r\n        return this._interfaces['users'];\r\n    }\r\n\r\n    get oauth() {\r\n        return this._interfaces['oauth'];\r\n    }\r\n\r\n    get scrobble() {\r\n        return this._interfaces['scrobble'];\r\n    }\r\n\r\n    get search() {\r\n        return this._interfaces['search'];\r\n    }\r\n\r\n    // endregion\r\n\r\n    // region Public methods\r\n\r\n    getSession(options) {\r\n        options = setDefaults(options, {\r\n            refresh: true\r\n        });\r\n\r\n        return this._refreshing.then(() => {\r\n            var session = this.session;\r\n\r\n            if(!isDefined(session)) {\r\n                return Promise.reject(new Error('No session available'));\r\n            }\r\n\r\n            if(isFunction(session)) {\r\n                session = session();\r\n            }\r\n\r\n            // Resolve session\r\n            return Promise.resolve(session).then((session) => {\r\n                if(!isDefined(session)) {\r\n                    return Promise.reject(new Error('No session available'));\r\n                }\r\n\r\n                if(!isDefined(session.created_at) || !isDefined(session.expires_in)) {\r\n                    console.warn('Missing session expiry properties, unable to determine session validity');\r\n                }\r\n\r\n                // Calculate seconds to/since session expire time\r\n                let rem = Math.round((session.created_at + session.expires_in) - (Date.now() / 1000));\r\n\r\n                if(rem > RefreshAt) {\r\n                    // Ensure the \"onSessionRefreshed\" callback has been defined\r\n                    if(!isDefined(this.onSessionRefreshed)) {\r\n                        console.warn(\r\n                            'onSessionRefreshed callback hasn\\'t been implemented, session will expire in %d second(s)',\r\n                            Math.round(rem)\r\n                        );\r\n                    }\r\n                } else {\r\n                    if(rem < RefreshDisableAt) {\r\n                        // Session has expired, and no `onSessionRefreshed` callback has been defined\r\n                        return Promise.reject(new Error(\r\n                            'Session expired ' + Math.round(Math.abs(rem)) + ' second(s) ago'\r\n                        ));\r\n                    }\r\n\r\n                    if(!isDefined(this.onSessionRefreshed)) {\r\n                        if(rem < 0) {\r\n                            // Session has expired\r\n                            return Promise.reject(new Error(\r\n                                'Session expired ' + Math.round(Math.abs(rem)) + ' second(s) ago'\r\n                            ));\r\n                        }\r\n\r\n                        console.warn('onSessionRefreshed callback hasn\\'t been implemented, unable to refresh session');\r\n                        return session;\r\n                    }\r\n\r\n                    if(rem < 0) {\r\n                        // Session has expired, and no `onSessionRefreshed` callback has been defined\r\n                        console.warn('Session expired ' + Math.round(Math.abs(rem)) + ' second(s) ago');\r\n                    }\r\n\r\n                    if(!options.refresh) {\r\n                        console.warn('Token refresh has been disabled');\r\n                        return session;\r\n                    }\r\n\r\n                    // Refresh authentication token\r\n                    this._refreshing = this._refreshSession(session);\r\n\r\n                    // Wait for token to refresh, then try retrieve the session again\r\n                    return this._refreshing.then(() => {\r\n                        return this.getSession({\r\n                            refresh: false\r\n                        });\r\n                    });\r\n                }\r\n\r\n                // Return current session\r\n                return session;\r\n            });\r\n        });\r\n    }\r\n\r\n    // endregion\r\n\r\n    // region Private methods\r\n\r\n    _constructInterfaces(interfaces) {\r\n        var result = {};\r\n        var value;\r\n\r\n        Object.keys(interfaces).forEach((key) => {\r\n            value = interfaces[key];\r\n\r\n            if(value.prototype instanceof Interface) {\r\n                result[key] = new value(this);  // eslint-disable-line new-cap\r\n            } else {\r\n                result[key] = this._constructInterfaces(value);\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    _refreshSession(session) {\r\n        if(!isDefined(session) || !isDefined(session.refresh_token)) {\r\n            // Unable to refresh session\r\n            return Promise.reject(new Error(\r\n                'Unable to refresh session, no \"refresh_token\" property is available'\r\n            ));\r\n        }\r\n\r\n        if(!isDefined(session.redirect_uri)) {\r\n            console.warn('Session has no \"redirect_uri\" property, defaulting to \"urn:ietf:wg:oauth:2.0:oob\"');\r\n        }\r\n\r\n        if(!isDefined(this.onSessionRefreshed)) {\r\n            return Promise.reject(new Error(\r\n                'Unable to refresh session, onSessionRefreshed callback hasn\\'t been implemented'\r\n            ));\r\n        }\r\n\r\n        // Refresh session\r\n        return this.oauth.refresh(session.refresh_token, session.redirect_uri).then((session) => {\r\n            if(!isDefined(this.onSessionRefreshed)) {\r\n                return;\r\n            }\r\n\r\n            // Fire \"onSessionRefreshed\" callback\r\n            this.onSessionRefreshed(session);\r\n        }, (error) => {\r\n            console.error('Unable to refresh session:', error.stack);\r\n        });\r\n    }\r\n\r\n    // endregion\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ~/eslint-loader!./src/index.js\n **/","import merge from 'lodash-amd/merge';\r\n\r\nexport function isDefined(value) {\r\n    return typeof value !== 'undefined' && value !== null;\r\n}\r\n\r\nexport function isFunction(value) {\r\n    return isDefined(value) && ({}).toString.call(value) === '[object Function]';\r\n}\r\n\r\nexport function isString(value) {\r\n    return isDefined(value) && ({}).toString.call(value) === '[object String]';\r\n}\r\n\r\nexport function setDefaults(value, defaults) {\r\n    if(!isDefined(value)) {\r\n        return defaults;\r\n    }\r\n\r\n    return merge({}, defaults, value);\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ~/eslint-loader!./src/core/helpers.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"lodash-amd/merge\"\n ** module id = 3\n ** module chunks = 0\n **/","import {isDefined} from './helpers';\r\n\r\nimport merge from 'lodash-amd/merge';\r\nimport querystring from 'querystring';\r\n\r\nexport default class HttpClient {\r\n    constructor(client, baseUrl) {\r\n        this._client = client;\r\n        this._baseUrl = baseUrl || 'https://api.trakt.tv/';\r\n    }\r\n\r\n    get baseUrl() {\r\n        return this._baseUrl;\r\n    }\r\n\r\n    get(path, options) {\r\n        return this.request('GET', path, options);\r\n    }\r\n\r\n    post(path, options) {\r\n        return this.request('POST', path, options);\r\n    }\r\n\r\n    request(method, path, options) {\r\n        options = merge({\r\n            headers: {},\r\n            params: {},\r\n\r\n            // Body\r\n            body: null,\r\n            bodyType: 'json',\r\n\r\n            // Authentication\r\n            authenticated: false,\r\n            session: null,\r\n\r\n            // Application\r\n            application: null,\r\n            includeAppParameters: false\r\n        }, options || {});\r\n\r\n        if(!isDefined(options.application)) {\r\n            options.application = this._client.application;\r\n        }\r\n\r\n        // Set request headers\r\n        options.headers['trakt-api-key'] = this._client.key;\r\n        options.headers['trakt-api-version'] = 2;\r\n\r\n        // Authentication\r\n        if(options.authenticated) {\r\n            if(!isDefined(options.session)) {\r\n                // Retrieve current client session\r\n                return this._client.getSession().then((session) => {\r\n                    if(!isDefined(session)) {\r\n                        // Invalid session returned\r\n                        return Promise.reject(new Error(\r\n                            'Authentication required, but an invalid session was returned'\r\n                        ));\r\n                    }\r\n\r\n                    // Fire request with `session`\r\n                    return this.request(method, path, {\r\n                        ...options,\r\n                        session: session\r\n                    });\r\n                }, (error) => {\r\n                    // No session available\r\n                    return Promise.reject(new Error(\r\n                        'Authentication required, but no session is available (error: ' + error.message + ')'\r\n                    ));\r\n                });\r\n            }\r\n\r\n            // Validate session\r\n            if(!isDefined(options.session.access_token)) {\r\n                return Promise.reject(new Error(\r\n                    'Invalid session provided, expected an object with the \"access_token\" property'\r\n                ));\r\n            }\r\n\r\n            // Set authorization header\r\n            options.headers['Authorization'] = 'Bearer ' + options.session.access_token;\r\n        }\r\n\r\n        // Application metadata\r\n        if(!isDefined(options.application)) {\r\n            options.application = {\r\n                name: 'trakt.js',\r\n                version: this._client.build.version,\r\n                date: this._client.build.date\r\n            };\r\n        }\r\n\r\n        // Application parameters\r\n        if(options.includeAppParameters === true) {\r\n            // Validate request method\r\n            if(method !== 'POST') {\r\n                return Promise.reject(new Error(\r\n                    '\"includeAppParameters\" can only be used with POST requests'\r\n                ));\r\n            }\r\n\r\n            // Version\r\n            if(isDefined(options.application.version)) {\r\n                options.body['app_version'] = options.application.version;\r\n            }\r\n\r\n            // Date\r\n            if(isDefined(options.application.date)) {\r\n                options.body['app_date'] = options.application.date;\r\n            }\r\n        }\r\n\r\n        // User Agent\r\n        options.headers['User-Agent'] = this._buildUserAgent(options.application);\r\n\r\n        // Process body\r\n        if(isDefined(options.body)) {\r\n            // Encode body as `bodyType`\r\n            if(options.bodyType === 'json') {\r\n                options.body = JSON.stringify(options.body);\r\n                options.headers['Content-Type'] = 'application/json';\r\n            } else {\r\n                throw new Error('Invalid \"bodyType\" provided: \"' + options.bodyType + '\"');\r\n            }\r\n        }\r\n\r\n        if(this._client.debug) {\r\n            console.debug('[trakt.js] %s %o (options: %O)', method, path, options);\r\n        }\r\n\r\n        // Send request\r\n        return fetch(this._baseUrl + path + '?' + this.encodeParameters(options.params), {\r\n            method: method,\r\n            headers: options.headers,\r\n            body: options.body\r\n        }).then(function(response) {\r\n            // TODO check status code\r\n            return response.json();\r\n        });\r\n    }\r\n\r\n    encodeParameters(parameters) {\r\n        // Remove undefined parameters\r\n        Object.keys(parameters).forEach((key) => {\r\n            if(typeof parameters[key] === 'undefined') {\r\n                delete parameters[key];\r\n            }\r\n        });\r\n\r\n        // Encode parameters to string\r\n        return querystring.encode(parameters);\r\n    }\r\n\r\n    _buildUserAgent(application) {\r\n        let result = '';\r\n\r\n        // Add application name (or \"Unknown\")\r\n        if(isDefined(application.name)) {\r\n            result += application.name;\r\n        } else {\r\n            result += 'Unknown';\r\n        }\r\n\r\n        // Add fragments (version, date)\r\n        let fragments = [\r\n            application.version,\r\n            application.date\r\n        ].filter((fragment) => {\r\n            return isDefined(fragment);\r\n        });\r\n\r\n        if(fragments.length < 1) {\r\n            return result;\r\n        }\r\n\r\n        return result + ' (' + fragments.join('; ') + ')';\r\n    }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ~/eslint-loader!./src/core/http.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"querystring\"\n ** module id = 5\n ** module chunks = 0\n **/","import _UserSettingsInterface from './users/settings';\r\nimport _OAuthInterface from './oauth';\r\nimport _ScrobbleInterface from './scrobble';\r\nimport _SearchInterface from './search';\r\n\r\nexport {_UserSettingsInterface as UserSettingsInterface};\r\nexport {_OAuthInterface as OAuthInterface};\r\nexport {_ScrobbleInterface as ScrobbleInterface};\r\nexport {_SearchInterface as SearchInterface};\r\n\r\nexport default {\r\n    users: {\r\n        settings: _UserSettingsInterface\r\n    },\r\n\r\n    oauth: _OAuthInterface,\r\n    scrobble: _ScrobbleInterface,\r\n    search: _SearchInterface\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ~/eslint-loader!./src/interfaces/index.js\n **/","import Interface from '../base';\r\n\r\nexport default class UserSettingsInterface extends Interface {\r\n    get(options) {\r\n        return this.http.get('users/settings', {\r\n            ...options,\r\n            authenticated: true\r\n        });\r\n    }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ~/eslint-loader!./src/interfaces/users/settings.js\n **/","import {isDefined} from '../core/helpers';\r\n\r\nexport default class Interface {\r\n    constructor(client) {\r\n        this._client = isDefined(client) ? client : null;\r\n    }\r\n\r\n    get http() {\r\n        if(!isDefined(this._client)) {\r\n            return null;\r\n        }\r\n\r\n        return this._client.http;\r\n    }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ~/eslint-loader!./src/interfaces/base.js\n **/","import {isDefined} from '../core/helpers';\r\nimport Interface from './base';\r\n\r\nexport default class OAuthInterface extends Interface {\r\n    authorizeUrl(redirectUri, state) {\r\n        if(!isDefined(this._client.key)) {\r\n            throw new Error('Missing required client \"key\" parameter');\r\n        }\r\n\r\n        return this._client.siteUrl + 'oauth/authorize?' + this.http.encodeParameters({\r\n            'client_id': this._client.key,\r\n\r\n            'response_type': 'code',\r\n            'redirect_uri': isDefined(redirectUri) ? redirectUri : 'urn:ietf:wg:oauth:2.0:oob',\r\n            'state': state\r\n        });\r\n    }\r\n\r\n    exchange(code, redirectUri, options) {\r\n        if(!isDefined(this._client.key)) {\r\n            throw new Error('Missing required client \"key\" parameter');\r\n        }\r\n\r\n        if(!isDefined(this._client.secret)) {\r\n            throw new Error('Missing required client \"secret\" parameter');\r\n        }\r\n\r\n        if(!isDefined(code)) {\r\n            throw new Error('Invalid value provided for the \"code\" parameter');\r\n        }\r\n\r\n        if(!isDefined(redirectUri)) {\r\n            redirectUri = 'urn:ietf:wg:oauth:2.0:oob';\r\n        }\r\n\r\n        return this.http.post('oauth/token', {\r\n            ...options,\r\n            body: {\r\n                'client_id': this._client.key,\r\n                'client_secret': this._client.secret,\r\n\r\n                'code': code,\r\n                'redirect_uri': redirectUri,\r\n                'grant_type': 'authorization_code'\r\n            }\r\n        }).then((session) => {\r\n            if(!isDefined(session)) {\r\n                return session;\r\n            }\r\n\r\n            session['redirect_uri'] = redirectUri;\r\n            return session;\r\n        });\r\n    }\r\n\r\n    refresh(refreshToken, redirectUri, options) {\r\n        if(!isDefined(this._client.key)) {\r\n            throw new Error('Missing required client \"key\" parameter');\r\n        }\r\n\r\n        if(!isDefined(this._client.secret)) {\r\n            throw new Error('Missing required client \"secret\" parameter');\r\n        }\r\n\r\n        if(!isDefined(refreshToken)) {\r\n            throw new Error('Invalid value provided for the \"code\" parameter');\r\n        }\r\n\r\n        return this.http.post('oauth/token', {\r\n            ...options,\r\n            body: {\r\n                'client_id': this._client.key,\r\n                'client_secret': this._client.secret,\r\n\r\n                'refresh_token': refreshToken,\r\n                'redirect_uri': isDefined(redirectUri) ? redirectUri : 'urn:ietf:wg:oauth:2.0:oob',\r\n                'grant_type': 'refresh_token'\r\n            }\r\n        });\r\n    }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ~/eslint-loader!./src/interfaces/oauth.js\n **/","import Interface from './base';\r\n\r\nexport default class ScrobbleInterface extends Interface {\r\n    start(item, progress, options) {\r\n        return this.http.post('scrobble/start', {\r\n            ...options,\r\n            authenticated: true,\r\n            includeAppParameters: true,\r\n\r\n            body: {\r\n                ...item,\r\n                progress: progress\r\n            }\r\n        });\r\n    };\r\n\r\n    pause(item, progress, options) {\r\n        return this.http.post('scrobble/pause', {\r\n            ...options,\r\n            authenticated: true,\r\n            includeAppParameters: true,\r\n\r\n            body: {\r\n                ...item,\r\n                progress: progress\r\n            }\r\n        });\r\n    };\r\n\r\n    stop(item, progress, options) {\r\n        return this.http.post('scrobble/stop', {\r\n            ...options,\r\n            authenticated: true,\r\n            includeAppParameters: true,\r\n\r\n            body: {\r\n                ...item,\r\n                progress: progress\r\n            }\r\n        });\r\n    };\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ~/eslint-loader!./src/interfaces/scrobble.js\n **/","import {isDefined} from '../core/helpers';\r\nimport Interface from './base';\r\n\r\nexport default class SearchInterface extends Interface {\r\n    lookup(type, id, options) {\r\n        if(!isDefined(type)) {\r\n            throw new Error('Invalid value provided for the \"type\" parameter');\r\n        }\r\n\r\n        if(!isDefined(id)) {\r\n            throw new Error('Invalid value provided for the \"id\" parameter');\r\n        }\r\n\r\n        return this.http.get('search', {\r\n            ...options,\r\n            params: {\r\n                'id_type': type,\r\n                'id': id\r\n            }\r\n        });\r\n    };\r\n\r\n    query(query, type, year, options) {\r\n        if(!isDefined(query)) {\r\n            throw new Error('Invalid value provided for the \"query\" parameter');\r\n        }\r\n\r\n        return this.http.get('search', {\r\n            ...options,\r\n            params: {\r\n                'query': query,\r\n                'type': type,\r\n                'year': year\r\n            }\r\n        });\r\n    };\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ~/eslint-loader!./src/interfaces/search.js\n **/"],"sourceRoot":""}