{"version":3,"sources":["webpack/universalModuleDefinition","trakt.min.js","webpack/bootstrap 6faa136470a819d0a620","./src/core/helpers.js","./src/interfaces/base.js","external \"lodash-amd/merge\"","./src/index.js","external \"whatwg-fetch\"","./src/core/http.js","./src/interfaces/index.js","./src/interfaces/oauth.js","./src/interfaces/scrobble.js","./src/interfaces/search.js","./src/interfaces/users/settings.js","external \"querystring\""],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_2__","__WEBPACK_EXTERNAL_MODULE_4__","__WEBPACK_EXTERNAL_MODULE_11__","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","isDefined","isFunction","toString","isString","setDefaults","defaults","_merge","default","obj","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","length","descriptor","writable","key","_createClass","protoProps","staticProps","_helpers","Interface","client","_client","http","_interopRequireDefault","Client","RefreshDisableAt","RefreshAt","Build","_http","_interfaces","_base","Version","Date","fetch","console","error","Promise","secret","options","application","version","date","debug","session","sessionKey","onSessionRefreshed","build","_initialized","_refreshing","resolve","initialize","_constructInterfaces","_this","refresh","then","reject","Error","created_at","expires_in","warn","rem","Math","round","now","abs","_refreshSession","getSession","interfaces","_this2","result","keys","forEach","_this3","refresh_token","redirect_uri","oauth","stack","fragments","baseUrl","split","names","shift","join","_extends","assign","arguments","source","apply","_querystring","HttpClient","_baseUrl","path","request","method","headers","params","body","bodyType","authenticated","includeAppParameters","message","access_token","_buildUserAgent","JSON","stringify","encodeParameters","response","json","parameters","encode","filter","fragment","_settings","_oauth","_scrobble","_search","_default","users","settings","scrobble","search","_typeof","Symbol","iterator","constructor","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","setPrototypeOf","__proto__","OAuthInterface","_Interface","getPrototypeOf","redirectUri","state","siteUrl","client_id","response_type","code","post","client_secret","grant_type","refreshToken","ScrobbleInterface","item","progress","SearchInterface","type","id","id_type","query","year","UserSettingsInterface"],"mappings":"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","file":"trakt.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash-amd/merge\"), require(\"whatwg-fetch\"), require(\"querystring\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash-amd/merge\", \"whatwg-fetch\", \"querystring\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"trakt\"] = factory(require(\"lodash-amd/merge\"), require(\"whatwg-fetch\"), require(\"querystring\"));\n\telse\n\t\troot[\"trakt\"] = factory(root[\"lodash-amd/merge\"], root[\"whatwg-fetch\"], root[\"querystring\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_11__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash-amd/merge\"), require(\"whatwg-fetch\"), require(\"querystring\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash-amd/merge\", \"whatwg-fetch\", \"querystring\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"trakt\"] = factory(require(\"lodash-amd/merge\"), require(\"whatwg-fetch\"), require(\"querystring\"));\n\telse\n\t\troot[\"trakt\"] = factory(root[\"lodash-amd/merge\"], root[\"whatwg-fetch\"], root[\"querystring\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_11__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 12);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isDefined = isDefined;\nexports.isFunction = isFunction;\nexports.isString = isString;\nexports.setDefaults = setDefaults;\n\nvar _merge = _interopRequireDefault(__webpack_require__(2));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction isDefined(value) {\n  return typeof value !== 'undefined' && value !== null;\n}\n\nfunction isFunction(value) {\n  return isDefined(value) && {}.toString.call(value) === '[object Function]';\n}\n\nfunction isString(value) {\n  return isDefined(value) && {}.toString.call(value) === '[object String]';\n}\n\nfunction setDefaults(value, defaults) {\n  if (!isDefined(value)) {\n    return defaults;\n  }\n\n  return (0, _merge.default)({}, defaults, value);\n}\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _helpers = __webpack_require__(0);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Interface =\n/*#__PURE__*/\nfunction () {\n  function Interface(client) {\n    _classCallCheck(this, Interface);\n\n    this._client = (0, _helpers.isDefined)(client) ? client : null;\n  }\n\n  _createClass(Interface, [{\n    key: \"http\",\n    get: function get() {\n      if (!(0, _helpers.isDefined)(this._client)) {\n        return null;\n      }\n\n      return this._client.http;\n    }\n  }]);\n\n  return Interface;\n}();\n\nexports.default = Interface;\nmodule.exports = exports[\"default\"];\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Client = exports.RefreshDisableAt = exports.RefreshAt = exports.Build = void 0;\n\nvar _helpers = __webpack_require__(0);\n\nvar _http = _interopRequireDefault(__webpack_require__(5));\n\nvar _interfaces = _interopRequireDefault(__webpack_require__(6));\n\nvar _base = _interopRequireDefault(__webpack_require__(1));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Build = {\n  Version: '2.0.0-alpha.2',\n  Date: '2016-10-01'\n};\nexports.Build = Build;\nvar RefreshAt = 7 * 24 * 60 * 60; // Refresh token one week before expiry\n\nexports.RefreshAt = RefreshAt;\nvar RefreshDisableAt = -28 * 24 * 60 * 60; // Disable refresh attempts after four weeks\n// Validate environment\n\nexports.RefreshDisableAt = RefreshDisableAt;\n\nif (!(0, _helpers.isDefined)(fetch)) {\n  console.error('\"fetch\" is not available, include whatwg-fetch to support this environment');\n}\n\nif (!(0, _helpers.isDefined)(Promise)) {\n  console.error('\"Promise\" is not available, include babel-polyfill to support this environment');\n}\n\nvar Client =\n/*#__PURE__*/\nfunction () {\n  function Client(key, secret, options) {\n    _classCallCheck(this, Client);\n\n    options = (0, _helpers.setDefaults)(options, {\n      application: {\n        name: 'trakt.js',\n        version: Build.Version,\n        date: Build.Date\n      },\n      debug: false,\n      session: null,\n      sessionKey: null,\n      onSessionRefreshed: null\n    }); // Application keys\n\n    this.key = key || null;\n    this.secret = secret || null; // Session\n\n    this.session = null;\n\n    if ((0, _helpers.isDefined)(options.session)) {\n      this.session = options.session;\n    } else if ((0, _helpers.isDefined)(options.sessionKey)) {\n      this.session = {\n        key: options.sessionKey\n      };\n    } // Callbacks\n\n\n    this.onSessionRefreshed = options.onSessionRefreshed; // Public variables\n\n    this.application = options.application;\n    this.build = Build;\n    this.debug = options.debug;\n    this.http = null; // Private variables\n\n    this._initialized = false;\n    this._interfaces = {};\n    this._refreshing = Promise.resolve(); // Initialize client\n\n    this.initialize();\n  }\n\n  _createClass(Client, [{\n    key: \"initialize\",\n    value: function initialize() {\n      if (this._initialized) {\n        return;\n      } // Construct http client\n\n\n      this.http = new _http.default(this); // Construct interfaces\n\n      this._interfaces = this._constructInterfaces(_interfaces.default); // Mark client as initialized\n\n      this._initialized = true;\n    }\n  }, {\n    key: \"getSession\",\n    // endregion\n    // region Public methods\n    value: function getSession(options) {\n      var _this = this;\n\n      options = (0, _helpers.setDefaults)(options, {\n        refresh: true\n      });\n      return this._refreshing.then(function () {\n        var session = _this.session;\n\n        if (!(0, _helpers.isDefined)(session)) {\n          return Promise.reject(new Error('No session available'));\n        }\n\n        if ((0, _helpers.isFunction)(session)) {\n          session = session();\n        } // Resolve session\n\n\n        return Promise.resolve(session).then(function (session) {\n          if (!(0, _helpers.isDefined)(session)) {\n            return Promise.reject(new Error('No session available'));\n          }\n\n          if (!(0, _helpers.isDefined)(session.created_at) || !(0, _helpers.isDefined)(session.expires_in)) {\n            console.warn('Missing session expiry properties, unable to determine session validity');\n          } // Calculate seconds to/since session expire time\n\n\n          var rem = Math.round(session.created_at + session.expires_in - Date.now() / 1000);\n\n          if (rem > RefreshAt) {\n            // Ensure the \"onSessionRefreshed\" callback has been defined\n            if (!(0, _helpers.isDefined)(_this.onSessionRefreshed)) {\n              console.warn('onSessionRefreshed callback hasn\\'t been implemented, session will expire in %d second(s)', Math.round(rem));\n            }\n          } else {\n            if (rem < RefreshDisableAt) {\n              // Session has expired, and no `onSessionRefreshed` callback has been defined\n              return Promise.reject(new Error('Session expired ' + Math.round(Math.abs(rem)) + ' second(s) ago'));\n            }\n\n            if (!(0, _helpers.isDefined)(_this.onSessionRefreshed)) {\n              if (rem < 0) {\n                // Session has expired\n                return Promise.reject(new Error('Session expired ' + Math.round(Math.abs(rem)) + ' second(s) ago'));\n              }\n\n              console.warn('onSessionRefreshed callback hasn\\'t been implemented, unable to refresh session');\n              return session;\n            }\n\n            if (rem < 0) {\n              // Session has expired, and no `onSessionRefreshed` callback has been defined\n              console.warn('Session expired ' + Math.round(Math.abs(rem)) + ' second(s) ago');\n            }\n\n            if (!options.refresh) {\n              console.warn('Token refresh has been disabled');\n              return session;\n            } // Refresh authentication token\n\n\n            _this._refreshing = _this._refreshSession(session); // Wait for token to refresh, then try retrieve the session again\n\n            return _this._refreshing.then(function () {\n              return _this.getSession({\n                refresh: false\n              });\n            });\n          } // Return current session\n\n\n          return session;\n        });\n      });\n    } // endregion\n    // region Private methods\n\n  }, {\n    key: \"_constructInterfaces\",\n    value: function _constructInterfaces(interfaces) {\n      var _this2 = this;\n\n      var result = {};\n      var value;\n      Object.keys(interfaces).forEach(function (key) {\n        value = interfaces[key];\n\n        if (value.prototype instanceof _base.default) {\n          result[key] = new value(_this2); // eslint-disable-line new-cap\n        } else {\n          result[key] = _this2._constructInterfaces(value);\n        }\n      });\n      return result;\n    }\n  }, {\n    key: \"_refreshSession\",\n    value: function _refreshSession(session) {\n      var _this3 = this;\n\n      if (!(0, _helpers.isDefined)(session) || !(0, _helpers.isDefined)(session.refresh_token)) {\n        // Unable to refresh session\n        return Promise.reject(new Error('Unable to refresh session, no \"refresh_token\" property is available'));\n      }\n\n      if (!(0, _helpers.isDefined)(session.redirect_uri)) {\n        console.warn('Session has no \"redirect_uri\" property, defaulting to \"urn:ietf:wg:oauth:2.0:oob\"');\n      }\n\n      if (!(0, _helpers.isDefined)(this.onSessionRefreshed)) {\n        return Promise.reject(new Error('Unable to refresh session, onSessionRefreshed callback hasn\\'t been implemented'));\n      } // Refresh session\n\n\n      return this.oauth.refresh(session.refresh_token, session.redirect_uri).then(function (session) {\n        if (!(0, _helpers.isDefined)(_this3.onSessionRefreshed)) {\n          return;\n        } // Fire \"onSessionRefreshed\" callback\n\n\n        _this3.onSessionRefreshed(session);\n      }, function (error) {\n        console.error('Unable to refresh session:', error.stack);\n      });\n    } // endregion\n\n  }, {\n    key: \"siteUrl\",\n    get: function get() {\n      var fragments = this.http.baseUrl.split('://'),\n          names = fragments[1].split('.'); // Remove first name ('api' or 'api-v2launch')\n\n      names.shift();\n      return [fragments[0], names.join('.')].join('://');\n    } // region Interfaces\n\n  }, {\n    key: \"users\",\n    get: function get() {\n      return this._interfaces['users'];\n    }\n  }, {\n    key: \"oauth\",\n    get: function get() {\n      return this._interfaces['oauth'];\n    }\n  }, {\n    key: \"scrobble\",\n    get: function get() {\n      return this._interfaces['scrobble'];\n    }\n  }, {\n    key: \"search\",\n    get: function get() {\n      return this._interfaces['search'];\n    }\n  }]);\n\n  return Client;\n}();\n\nexports.Client = Client;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _merge = _interopRequireDefault(__webpack_require__(2));\n\nvar _querystring = _interopRequireDefault(__webpack_require__(11));\n\nvar _helpers = __webpack_require__(0);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar HttpClient =\n/*#__PURE__*/\nfunction () {\n  function HttpClient(client, baseUrl) {\n    _classCallCheck(this, HttpClient);\n\n    this._client = client;\n    this._baseUrl = baseUrl || 'https://api.trakt.tv/';\n  }\n\n  _createClass(HttpClient, [{\n    key: \"get\",\n    value: function get(path, options) {\n      return this.request('GET', path, options);\n    }\n  }, {\n    key: \"post\",\n    value: function post(path, options) {\n      return this.request('POST', path, options);\n    }\n  }, {\n    key: \"request\",\n    value: function request(method, path, options) {\n      var _this = this;\n\n      options = (0, _merge.default)({\n        headers: {},\n        params: {},\n        // Body\n        body: null,\n        bodyType: 'json',\n        // Authentication\n        authenticated: false,\n        session: null,\n        // Application\n        application: null,\n        includeAppParameters: false\n      }, options || {});\n\n      if (!(0, _helpers.isDefined)(options.application)) {\n        options.application = this._client.application;\n      } // Set request headers\n\n\n      options.headers['trakt-api-key'] = this._client.key;\n      options.headers['trakt-api-version'] = 2; // Authentication\n\n      if (options.authenticated) {\n        if (!(0, _helpers.isDefined)(options.session)) {\n          // Retrieve current client session\n          return this._client.getSession().then(function (session) {\n            if (!(0, _helpers.isDefined)(session)) {\n              // Invalid session returned\n              return Promise.reject(new Error('Authentication required, but an invalid session was returned'));\n            } // Fire request with `session`\n\n\n            return _this.request(method, path, _extends({}, options, {\n              session: session\n            }));\n          }, function (error) {\n            // No session available\n            return Promise.reject(new Error('Authentication required, but no session is available (error: ' + error.message + ')'));\n          });\n        } // Validate session\n\n\n        if (!(0, _helpers.isDefined)(options.session.access_token)) {\n          return Promise.reject(new Error('Invalid session provided, expected an object with the \"access_token\" property'));\n        } // Set authorization header\n\n\n        options.headers['Authorization'] = 'Bearer ' + options.session.access_token;\n      } // Application metadata\n\n\n      if (!(0, _helpers.isDefined)(options.application)) {\n        options.application = {\n          name: 'trakt.js',\n          version: this._client.build.version,\n          date: this._client.build.date\n        };\n      } // Application parameters\n\n\n      if (options.includeAppParameters === true) {\n        // Validate request method\n        if (method !== 'POST') {\n          return Promise.reject(new Error('\"includeAppParameters\" can only be used with POST requests'));\n        } // Version\n\n\n        if ((0, _helpers.isDefined)(options.application.version)) {\n          options.body['app_version'] = options.application.version;\n        } // Date\n\n\n        if ((0, _helpers.isDefined)(options.application.date)) {\n          options.body['app_date'] = options.application.date;\n        }\n      } // User Agent\n\n\n      options.headers['User-Agent'] = this._buildUserAgent(options.application); // Process body\n\n      if ((0, _helpers.isDefined)(options.body)) {\n        // Encode body as `bodyType`\n        if (options.bodyType === 'json') {\n          options.body = JSON.stringify(options.body);\n          options.headers['Content-Type'] = 'application/json';\n        } else {\n          throw new Error('Invalid \"bodyType\" provided: \"' + options.bodyType + '\"');\n        }\n      }\n\n      if (this._client.debug) {\n        console.debug('[trakt.js] %s %o (options: %O)', method, path, options);\n      } // Send request\n\n\n      return fetch(this._baseUrl + path + '?' + this.encodeParameters(options.params), {\n        method: method,\n        headers: options.headers,\n        body: options.body\n      }).then(function (response) {\n        // TODO check status code\n        return response.json();\n      });\n    }\n  }, {\n    key: \"encodeParameters\",\n    value: function encodeParameters(parameters) {\n      // Remove undefined parameters\n      Object.keys(parameters).forEach(function (key) {\n        if (typeof parameters[key] === 'undefined') {\n          delete parameters[key];\n        }\n      }); // Encode parameters to string\n\n      return _querystring.default.encode(parameters);\n    }\n  }, {\n    key: \"_buildUserAgent\",\n    value: function _buildUserAgent(application) {\n      var result = ''; // Add application name (or \"Unknown\")\n\n      if ((0, _helpers.isDefined)(application.name)) {\n        result += application.name;\n      } else {\n        result += 'Unknown';\n      } // Add fragments (version, date)\n\n\n      var fragments = [application.version, application.date].filter(function (fragment) {\n        return (0, _helpers.isDefined)(fragment);\n      });\n\n      if (fragments.length < 1) {\n        return result;\n      }\n\n      return result + ' (' + fragments.join('; ') + ')';\n    }\n  }, {\n    key: \"baseUrl\",\n    get: function get() {\n      return this._baseUrl;\n    }\n  }]);\n\n  return HttpClient;\n}();\n\nexports.default = HttpClient;\nmodule.exports = exports[\"default\"];\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"UserSettingsInterface\", {\n  enumerable: true,\n  get: function get() {\n    return _settings.default;\n  }\n});\nObject.defineProperty(exports, \"OAuthInterface\", {\n  enumerable: true,\n  get: function get() {\n    return _oauth.default;\n  }\n});\nObject.defineProperty(exports, \"ScrobbleInterface\", {\n  enumerable: true,\n  get: function get() {\n    return _scrobble.default;\n  }\n});\nObject.defineProperty(exports, \"SearchInterface\", {\n  enumerable: true,\n  get: function get() {\n    return _search.default;\n  }\n});\nexports.default = void 0;\n\nvar _settings = _interopRequireDefault(__webpack_require__(10));\n\nvar _oauth = _interopRequireDefault(__webpack_require__(7));\n\nvar _scrobble = _interopRequireDefault(__webpack_require__(8));\n\nvar _search = _interopRequireDefault(__webpack_require__(9));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _default = {\n  users: {\n    settings: _settings.default\n  },\n  oauth: _oauth.default,\n  scrobble: _scrobble.default,\n  search: _search.default\n};\nexports.default = _default;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _helpers = __webpack_require__(0);\n\nvar _base = _interopRequireDefault(__webpack_require__(1));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar OAuthInterface =\n/*#__PURE__*/\nfunction (_Interface) {\n  _inherits(OAuthInterface, _Interface);\n\n  function OAuthInterface() {\n    _classCallCheck(this, OAuthInterface);\n\n    return _possibleConstructorReturn(this, (OAuthInterface.__proto__ || Object.getPrototypeOf(OAuthInterface)).apply(this, arguments));\n  }\n\n  _createClass(OAuthInterface, [{\n    key: \"authorizeUrl\",\n    value: function authorizeUrl(redirectUri, state) {\n      if (!(0, _helpers.isDefined)(this._client.key)) {\n        throw new Error('Missing required client \"key\" parameter');\n      }\n\n      return this._client.siteUrl + 'oauth/authorize?' + this.http.encodeParameters({\n        'client_id': this._client.key,\n        'response_type': 'code',\n        'redirect_uri': (0, _helpers.isDefined)(redirectUri) ? redirectUri : 'urn:ietf:wg:oauth:2.0:oob',\n        'state': state\n      });\n    }\n  }, {\n    key: \"exchange\",\n    value: function exchange(code, redirectUri, options) {\n      if (!(0, _helpers.isDefined)(this._client.key)) {\n        throw new Error('Missing required client \"key\" parameter');\n      }\n\n      if (!(0, _helpers.isDefined)(this._client.secret)) {\n        throw new Error('Missing required client \"secret\" parameter');\n      }\n\n      if (!(0, _helpers.isDefined)(code)) {\n        throw new Error('Invalid value provided for the \"code\" parameter');\n      }\n\n      if (!(0, _helpers.isDefined)(redirectUri)) {\n        redirectUri = 'urn:ietf:wg:oauth:2.0:oob';\n      }\n\n      return this.http.post('oauth/token', _extends({}, options, {\n        body: {\n          'client_id': this._client.key,\n          'client_secret': this._client.secret,\n          'code': code,\n          'redirect_uri': redirectUri,\n          'grant_type': 'authorization_code'\n        }\n      })).then(function (session) {\n        if (!(0, _helpers.isDefined)(session)) {\n          return session;\n        }\n\n        session['redirect_uri'] = redirectUri;\n        return session;\n      });\n    }\n  }, {\n    key: \"refresh\",\n    value: function refresh(refreshToken, redirectUri, options) {\n      if (!(0, _helpers.isDefined)(this._client.key)) {\n        throw new Error('Missing required client \"key\" parameter');\n      }\n\n      if (!(0, _helpers.isDefined)(this._client.secret)) {\n        throw new Error('Missing required client \"secret\" parameter');\n      }\n\n      if (!(0, _helpers.isDefined)(refreshToken)) {\n        throw new Error('Invalid value provided for the \"code\" parameter');\n      }\n\n      return this.http.post('oauth/token', _extends({}, options, {\n        body: {\n          'client_id': this._client.key,\n          'client_secret': this._client.secret,\n          'refresh_token': refreshToken,\n          'redirect_uri': (0, _helpers.isDefined)(redirectUri) ? redirectUri : 'urn:ietf:wg:oauth:2.0:oob',\n          'grant_type': 'refresh_token'\n        }\n      }));\n    }\n  }]);\n\n  return OAuthInterface;\n}(_base.default);\n\nexports.default = OAuthInterface;\nmodule.exports = exports[\"default\"];\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _base = _interopRequireDefault(__webpack_require__(1));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ScrobbleInterface =\n/*#__PURE__*/\nfunction (_Interface) {\n  _inherits(ScrobbleInterface, _Interface);\n\n  function ScrobbleInterface() {\n    _classCallCheck(this, ScrobbleInterface);\n\n    return _possibleConstructorReturn(this, (ScrobbleInterface.__proto__ || Object.getPrototypeOf(ScrobbleInterface)).apply(this, arguments));\n  }\n\n  _createClass(ScrobbleInterface, [{\n    key: \"start\",\n    value: function start(item, progress, options) {\n      return this.http.post('scrobble/start', _extends({}, options, {\n        authenticated: true,\n        includeAppParameters: true,\n        body: _extends({}, item, {\n          progress: progress\n        })\n      }));\n    }\n  }, {\n    key: \"pause\",\n    value: function pause(item, progress, options) {\n      return this.http.post('scrobble/pause', _extends({}, options, {\n        authenticated: true,\n        includeAppParameters: true,\n        body: _extends({}, item, {\n          progress: progress\n        })\n      }));\n    }\n  }, {\n    key: \"stop\",\n    value: function stop(item, progress, options) {\n      return this.http.post('scrobble/stop', _extends({}, options, {\n        authenticated: true,\n        includeAppParameters: true,\n        body: _extends({}, item, {\n          progress: progress\n        })\n      }));\n    }\n  }]);\n\n  return ScrobbleInterface;\n}(_base.default);\n\nexports.default = ScrobbleInterface;\nmodule.exports = exports[\"default\"];\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _helpers = __webpack_require__(0);\n\nvar _base = _interopRequireDefault(__webpack_require__(1));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar SearchInterface =\n/*#__PURE__*/\nfunction (_Interface) {\n  _inherits(SearchInterface, _Interface);\n\n  function SearchInterface() {\n    _classCallCheck(this, SearchInterface);\n\n    return _possibleConstructorReturn(this, (SearchInterface.__proto__ || Object.getPrototypeOf(SearchInterface)).apply(this, arguments));\n  }\n\n  _createClass(SearchInterface, [{\n    key: \"lookup\",\n    value: function lookup(type, id, options) {\n      if (!(0, _helpers.isDefined)(type)) {\n        throw new Error('Invalid value provided for the \"type\" parameter');\n      }\n\n      if (!(0, _helpers.isDefined)(id)) {\n        throw new Error('Invalid value provided for the \"id\" parameter');\n      }\n\n      return this.http.get('search', _extends({}, options, {\n        params: {\n          'id_type': type,\n          'id': id\n        }\n      }));\n    }\n  }, {\n    key: \"query\",\n    value: function query(_query, type, year, options) {\n      if (!(0, _helpers.isDefined)(_query)) {\n        throw new Error('Invalid value provided for the \"query\" parameter');\n      }\n\n      return this.http.get('search', _extends({}, options, {\n        params: {\n          'query': _query,\n          'type': type,\n          'year': year\n        }\n      }));\n    }\n  }]);\n\n  return SearchInterface;\n}(_base.default);\n\nexports.default = SearchInterface;\nmodule.exports = exports[\"default\"];\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _base = _interopRequireDefault(__webpack_require__(1));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar UserSettingsInterface =\n/*#__PURE__*/\nfunction (_Interface) {\n  _inherits(UserSettingsInterface, _Interface);\n\n  function UserSettingsInterface() {\n    _classCallCheck(this, UserSettingsInterface);\n\n    return _possibleConstructorReturn(this, (UserSettingsInterface.__proto__ || Object.getPrototypeOf(UserSettingsInterface)).apply(this, arguments));\n  }\n\n  _createClass(UserSettingsInterface, [{\n    key: \"get\",\n    value: function get(options) {\n      return this.http.get('users/settings', _extends({}, options, {\n        authenticated: true\n      }));\n    }\n  }]);\n\n  return UserSettingsInterface;\n}(_base.default);\n\nexports.default = UserSettingsInterface;\nmodule.exports = exports[\"default\"];\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_11__;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(4);\nmodule.exports = __webpack_require__(3);\n\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// trakt.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 12);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6faa136470a819d0a620","import merge from 'lodash-amd/merge';\r\n\r\n\r\nexport function isDefined(value) {\r\n    return typeof value !== 'undefined' && value !== null;\r\n}\r\n\r\nexport function isFunction(value) {\r\n    return isDefined(value) && ({}).toString.call(value) === '[object Function]';\r\n}\r\n\r\nexport function isString(value) {\r\n    return isDefined(value) && ({}).toString.call(value) === '[object String]';\r\n}\r\n\r\nexport function setDefaults(value, defaults) {\r\n    if(!isDefined(value)) {\r\n        return defaults;\r\n    }\r\n\r\n    return merge({}, defaults, value);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/helpers.js","import {isDefined} from '../core/helpers';\r\n\r\n\r\nexport default class Interface {\r\n    constructor(client) {\r\n        this._client = isDefined(client) ? client : null;\r\n    }\r\n\r\n    get http() {\r\n        if(!isDefined(this._client)) {\r\n            return null;\r\n        }\r\n\r\n        return this._client.http;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/interfaces/base.js","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash-amd/merge\"\n// module id = 2\n// module chunks = 0","import {isDefined, isFunction, setDefaults} from './core/helpers';\r\nimport HttpClient from './core/http';\r\nimport Interfaces from './interfaces';\r\nimport Interface from './interfaces/base';\r\n\r\n\r\nexport const Build = {\r\n    Version: '2.0.0-alpha.2',\r\n    Date: '2016-10-01'\r\n};\r\n\r\nexport const RefreshAt = 7 * 24 * 60 * 60;  // Refresh token one week before expiry\r\nexport const RefreshDisableAt = -28 * 24 * 60 * 60;  // Disable refresh attempts after four weeks\r\n\r\n// Validate environment\r\nif(!isDefined(fetch)) {\r\n    console.error('\"fetch\" is not available, include whatwg-fetch to support this environment');\r\n}\r\n\r\nif(!isDefined(Promise)) {\r\n    console.error('\"Promise\" is not available, include babel-polyfill to support this environment');\r\n}\r\n\r\nexport class Client {\r\n    constructor(key, secret, options) {\r\n        options = setDefaults(options, {\r\n            application: {\r\n                name: 'trakt.js',\r\n                version: Build.Version,\r\n                date: Build.Date\r\n            },\r\n\r\n            debug: false,\r\n\r\n            session: null,\r\n            sessionKey: null,\r\n            onSessionRefreshed: null\r\n        });\r\n\r\n        // Application keys\r\n        this.key = key || null;\r\n        this.secret = secret || null;\r\n\r\n        // Session\r\n        this.session = null;\r\n\r\n        if(isDefined(options.session)) {\r\n            this.session = options.session;\r\n        } else if(isDefined(options.sessionKey)) {\r\n            this.session = {key: options.sessionKey};\r\n        }\r\n\r\n        // Callbacks\r\n        this.onSessionRefreshed = options.onSessionRefreshed;\r\n\r\n        // Public variables\r\n        this.application = options.application;\r\n        this.build = Build;\r\n        this.debug = options.debug;\r\n\r\n        this.http = null;\r\n\r\n        // Private variables\r\n        this._initialized = false;\r\n        this._interfaces = {};\r\n        this._refreshing = Promise.resolve();\r\n\r\n        // Initialize client\r\n        this.initialize();\r\n    }\r\n\r\n    initialize() {\r\n        if(this._initialized) {\r\n            return;\r\n        }\r\n\r\n        // Construct http client\r\n        this.http = new HttpClient(this);\r\n\r\n        // Construct interfaces\r\n        this._interfaces = this._constructInterfaces(Interfaces);\r\n\r\n        // Mark client as initialized\r\n        this._initialized = true;\r\n    }\r\n\r\n    get siteUrl() {\r\n        var fragments = this.http.baseUrl.split('://'),\r\n            names = fragments[1].split('.');\r\n\r\n        // Remove first name ('api' or 'api-v2launch')\r\n        names.shift();\r\n\r\n        return [fragments[0], names.join('.')].join('://');\r\n    }\r\n\r\n    // region Interfaces\r\n\r\n    get users() {\r\n        return this._interfaces['users'];\r\n    }\r\n\r\n    get oauth() {\r\n        return this._interfaces['oauth'];\r\n    }\r\n\r\n    get scrobble() {\r\n        return this._interfaces['scrobble'];\r\n    }\r\n\r\n    get search() {\r\n        return this._interfaces['search'];\r\n    }\r\n\r\n    // endregion\r\n\r\n    // region Public methods\r\n\r\n    getSession(options) {\r\n        options = setDefaults(options, {\r\n            refresh: true\r\n        });\r\n\r\n        return this._refreshing.then(() => {\r\n            var session = this.session;\r\n\r\n            if(!isDefined(session)) {\r\n                return Promise.reject(new Error('No session available'));\r\n            }\r\n\r\n            if(isFunction(session)) {\r\n                session = session();\r\n            }\r\n\r\n            // Resolve session\r\n            return Promise.resolve(session).then((session) => {\r\n                if(!isDefined(session)) {\r\n                    return Promise.reject(new Error('No session available'));\r\n                }\r\n\r\n                if(!isDefined(session.created_at) || !isDefined(session.expires_in)) {\r\n                    console.warn('Missing session expiry properties, unable to determine session validity');\r\n                }\r\n\r\n                // Calculate seconds to/since session expire time\r\n                let rem = Math.round((session.created_at + session.expires_in) - (Date.now() / 1000));\r\n\r\n                if(rem > RefreshAt) {\r\n                    // Ensure the \"onSessionRefreshed\" callback has been defined\r\n                    if(!isDefined(this.onSessionRefreshed)) {\r\n                        console.warn(\r\n                            'onSessionRefreshed callback hasn\\'t been implemented, session will expire in %d second(s)',\r\n                            Math.round(rem)\r\n                        );\r\n                    }\r\n                } else {\r\n                    if(rem < RefreshDisableAt) {\r\n                        // Session has expired, and no `onSessionRefreshed` callback has been defined\r\n                        return Promise.reject(new Error(\r\n                            'Session expired ' + Math.round(Math.abs(rem)) + ' second(s) ago'\r\n                        ));\r\n                    }\r\n\r\n                    if(!isDefined(this.onSessionRefreshed)) {\r\n                        if(rem < 0) {\r\n                            // Session has expired\r\n                            return Promise.reject(new Error(\r\n                                'Session expired ' + Math.round(Math.abs(rem)) + ' second(s) ago'\r\n                            ));\r\n                        }\r\n\r\n                        console.warn('onSessionRefreshed callback hasn\\'t been implemented, unable to refresh session');\r\n                        return session;\r\n                    }\r\n\r\n                    if(rem < 0) {\r\n                        // Session has expired, and no `onSessionRefreshed` callback has been defined\r\n                        console.warn('Session expired ' + Math.round(Math.abs(rem)) + ' second(s) ago');\r\n                    }\r\n\r\n                    if(!options.refresh) {\r\n                        console.warn('Token refresh has been disabled');\r\n                        return session;\r\n                    }\r\n\r\n                    // Refresh authentication token\r\n                    this._refreshing = this._refreshSession(session);\r\n\r\n                    // Wait for token to refresh, then try retrieve the session again\r\n                    return this._refreshing.then(() => {\r\n                        return this.getSession({\r\n                            refresh: false\r\n                        });\r\n                    });\r\n                }\r\n\r\n                // Return current session\r\n                return session;\r\n            });\r\n        });\r\n    }\r\n\r\n    // endregion\r\n\r\n    // region Private methods\r\n\r\n    _constructInterfaces(interfaces) {\r\n        var result = {};\r\n        var value;\r\n\r\n        Object.keys(interfaces).forEach((key) => {\r\n            value = interfaces[key];\r\n\r\n            if(value.prototype instanceof Interface) {\r\n                result[key] = new value(this);  // eslint-disable-line new-cap\r\n            } else {\r\n                result[key] = this._constructInterfaces(value);\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    _refreshSession(session) {\r\n        if(!isDefined(session) || !isDefined(session.refresh_token)) {\r\n            // Unable to refresh session\r\n            return Promise.reject(new Error(\r\n                'Unable to refresh session, no \"refresh_token\" property is available'\r\n            ));\r\n        }\r\n\r\n        if(!isDefined(session.redirect_uri)) {\r\n            console.warn('Session has no \"redirect_uri\" property, defaulting to \"urn:ietf:wg:oauth:2.0:oob\"');\r\n        }\r\n\r\n        if(!isDefined(this.onSessionRefreshed)) {\r\n            return Promise.reject(new Error(\r\n                'Unable to refresh session, onSessionRefreshed callback hasn\\'t been implemented'\r\n            ));\r\n        }\r\n\r\n        // Refresh session\r\n        return this.oauth.refresh(session.refresh_token, session.redirect_uri).then((session) => {\r\n            if(!isDefined(this.onSessionRefreshed)) {\r\n                return;\r\n            }\r\n\r\n            // Fire \"onSessionRefreshed\" callback\r\n            this.onSessionRefreshed(session);\r\n        }, (error) => {\r\n            console.error('Unable to refresh session:', error.stack);\r\n        });\r\n    }\r\n\r\n    // endregion\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"whatwg-fetch\"\n// module id = 4\n// module chunks = 0","import merge from 'lodash-amd/merge';\r\nimport querystring from 'querystring';\r\n\r\nimport {isDefined} from './helpers';\r\n\r\n\r\nexport default class HttpClient {\r\n    constructor(client, baseUrl) {\r\n        this._client = client;\r\n        this._baseUrl = baseUrl || 'https://api.trakt.tv/';\r\n    }\r\n\r\n    get baseUrl() {\r\n        return this._baseUrl;\r\n    }\r\n\r\n    get(path, options) {\r\n        return this.request('GET', path, options);\r\n    }\r\n\r\n    post(path, options) {\r\n        return this.request('POST', path, options);\r\n    }\r\n\r\n    request(method, path, options) {\r\n        options = merge({\r\n            headers: {},\r\n            params: {},\r\n\r\n            // Body\r\n            body: null,\r\n            bodyType: 'json',\r\n\r\n            // Authentication\r\n            authenticated: false,\r\n            session: null,\r\n\r\n            // Application\r\n            application: null,\r\n            includeAppParameters: false\r\n        }, options || {});\r\n\r\n        if(!isDefined(options.application)) {\r\n            options.application = this._client.application;\r\n        }\r\n\r\n        // Set request headers\r\n        options.headers['trakt-api-key'] = this._client.key;\r\n        options.headers['trakt-api-version'] = 2;\r\n\r\n        // Authentication\r\n        if(options.authenticated) {\r\n            if(!isDefined(options.session)) {\r\n                // Retrieve current client session\r\n                return this._client.getSession().then((session) => {\r\n                    if(!isDefined(session)) {\r\n                        // Invalid session returned\r\n                        return Promise.reject(new Error(\r\n                            'Authentication required, but an invalid session was returned'\r\n                        ));\r\n                    }\r\n\r\n                    // Fire request with `session`\r\n                    return this.request(method, path, {\r\n                        ...options,\r\n                        session: session\r\n                    });\r\n                }, (error) => {\r\n                    // No session available\r\n                    return Promise.reject(new Error(\r\n                        'Authentication required, but no session is available (error: ' + error.message + ')'\r\n                    ));\r\n                });\r\n            }\r\n\r\n            // Validate session\r\n            if(!isDefined(options.session.access_token)) {\r\n                return Promise.reject(new Error(\r\n                    'Invalid session provided, expected an object with the \"access_token\" property'\r\n                ));\r\n            }\r\n\r\n            // Set authorization header\r\n            options.headers['Authorization'] = 'Bearer ' + options.session.access_token;\r\n        }\r\n\r\n        // Application metadata\r\n        if(!isDefined(options.application)) {\r\n            options.application = {\r\n                name: 'trakt.js',\r\n                version: this._client.build.version,\r\n                date: this._client.build.date\r\n            };\r\n        }\r\n\r\n        // Application parameters\r\n        if(options.includeAppParameters === true) {\r\n            // Validate request method\r\n            if(method !== 'POST') {\r\n                return Promise.reject(new Error(\r\n                    '\"includeAppParameters\" can only be used with POST requests'\r\n                ));\r\n            }\r\n\r\n            // Version\r\n            if(isDefined(options.application.version)) {\r\n                options.body['app_version'] = options.application.version;\r\n            }\r\n\r\n            // Date\r\n            if(isDefined(options.application.date)) {\r\n                options.body['app_date'] = options.application.date;\r\n            }\r\n        }\r\n\r\n        // User Agent\r\n        options.headers['User-Agent'] = this._buildUserAgent(options.application);\r\n\r\n        // Process body\r\n        if(isDefined(options.body)) {\r\n            // Encode body as `bodyType`\r\n            if(options.bodyType === 'json') {\r\n                options.body = JSON.stringify(options.body);\r\n                options.headers['Content-Type'] = 'application/json';\r\n            } else {\r\n                throw new Error('Invalid \"bodyType\" provided: \"' + options.bodyType + '\"');\r\n            }\r\n        }\r\n\r\n        if(this._client.debug) {\r\n            console.debug('[trakt.js] %s %o (options: %O)', method, path, options);\r\n        }\r\n\r\n        // Send request\r\n        return fetch(this._baseUrl + path + '?' + this.encodeParameters(options.params), {\r\n            method: method,\r\n            headers: options.headers,\r\n            body: options.body\r\n        }).then(function(response) {\r\n            // TODO check status code\r\n            return response.json();\r\n        });\r\n    }\r\n\r\n    encodeParameters(parameters) {\r\n        // Remove undefined parameters\r\n        Object.keys(parameters).forEach((key) => {\r\n            if(typeof parameters[key] === 'undefined') {\r\n                delete parameters[key];\r\n            }\r\n        });\r\n\r\n        // Encode parameters to string\r\n        return querystring.encode(parameters);\r\n    }\r\n\r\n    _buildUserAgent(application) {\r\n        let result = '';\r\n\r\n        // Add application name (or \"Unknown\")\r\n        if(isDefined(application.name)) {\r\n            result += application.name;\r\n        } else {\r\n            result += 'Unknown';\r\n        }\r\n\r\n        // Add fragments (version, date)\r\n        let fragments = [\r\n            application.version,\r\n            application.date\r\n        ].filter((fragment) => {\r\n            return isDefined(fragment);\r\n        });\r\n\r\n        if(fragments.length < 1) {\r\n            return result;\r\n        }\r\n\r\n        return result + ' (' + fragments.join('; ') + ')';\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/http.js","import _UserSettingsInterface from './users/settings';\r\nimport _OAuthInterface from './oauth';\r\nimport _ScrobbleInterface from './scrobble';\r\nimport _SearchInterface from './search';\r\n\r\n\r\nexport {_UserSettingsInterface as UserSettingsInterface};\r\nexport {_OAuthInterface as OAuthInterface};\r\nexport {_ScrobbleInterface as ScrobbleInterface};\r\nexport {_SearchInterface as SearchInterface};\r\n\r\nexport default {\r\n    users: {\r\n        settings: _UserSettingsInterface\r\n    },\r\n\r\n    oauth: _OAuthInterface,\r\n    scrobble: _ScrobbleInterface,\r\n    search: _SearchInterface\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/interfaces/index.js","import {isDefined} from '../core/helpers';\r\nimport Interface from './base';\r\n\r\n\r\nexport default class OAuthInterface extends Interface {\r\n    authorizeUrl(redirectUri, state) {\r\n        if(!isDefined(this._client.key)) {\r\n            throw new Error('Missing required client \"key\" parameter');\r\n        }\r\n\r\n        return this._client.siteUrl + 'oauth/authorize?' + this.http.encodeParameters({\r\n            'client_id': this._client.key,\r\n\r\n            'response_type': 'code',\r\n            'redirect_uri': isDefined(redirectUri) ? redirectUri : 'urn:ietf:wg:oauth:2.0:oob',\r\n            'state': state\r\n        });\r\n    }\r\n\r\n    exchange(code, redirectUri, options) {\r\n        if(!isDefined(this._client.key)) {\r\n            throw new Error('Missing required client \"key\" parameter');\r\n        }\r\n\r\n        if(!isDefined(this._client.secret)) {\r\n            throw new Error('Missing required client \"secret\" parameter');\r\n        }\r\n\r\n        if(!isDefined(code)) {\r\n            throw new Error('Invalid value provided for the \"code\" parameter');\r\n        }\r\n\r\n        if(!isDefined(redirectUri)) {\r\n            redirectUri = 'urn:ietf:wg:oauth:2.0:oob';\r\n        }\r\n\r\n        return this.http.post('oauth/token', {\r\n            ...options,\r\n            body: {\r\n                'client_id': this._client.key,\r\n                'client_secret': this._client.secret,\r\n\r\n                'code': code,\r\n                'redirect_uri': redirectUri,\r\n                'grant_type': 'authorization_code'\r\n            }\r\n        }).then((session) => {\r\n            if(!isDefined(session)) {\r\n                return session;\r\n            }\r\n\r\n            session['redirect_uri'] = redirectUri;\r\n            return session;\r\n        });\r\n    }\r\n\r\n    refresh(refreshToken, redirectUri, options) {\r\n        if(!isDefined(this._client.key)) {\r\n            throw new Error('Missing required client \"key\" parameter');\r\n        }\r\n\r\n        if(!isDefined(this._client.secret)) {\r\n            throw new Error('Missing required client \"secret\" parameter');\r\n        }\r\n\r\n        if(!isDefined(refreshToken)) {\r\n            throw new Error('Invalid value provided for the \"code\" parameter');\r\n        }\r\n\r\n        return this.http.post('oauth/token', {\r\n            ...options,\r\n            body: {\r\n                'client_id': this._client.key,\r\n                'client_secret': this._client.secret,\r\n\r\n                'refresh_token': refreshToken,\r\n                'redirect_uri': isDefined(redirectUri) ? redirectUri : 'urn:ietf:wg:oauth:2.0:oob',\r\n                'grant_type': 'refresh_token'\r\n            }\r\n        });\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/interfaces/oauth.js","import Interface from './base';\r\n\r\n\r\nexport default class ScrobbleInterface extends Interface {\r\n    start(item, progress, options) {\r\n        return this.http.post('scrobble/start', {\r\n            ...options,\r\n            authenticated: true,\r\n            includeAppParameters: true,\r\n\r\n            body: {\r\n                ...item,\r\n                progress: progress\r\n            }\r\n        });\r\n    };\r\n\r\n    pause(item, progress, options) {\r\n        return this.http.post('scrobble/pause', {\r\n            ...options,\r\n            authenticated: true,\r\n            includeAppParameters: true,\r\n\r\n            body: {\r\n                ...item,\r\n                progress: progress\r\n            }\r\n        });\r\n    };\r\n\r\n    stop(item, progress, options) {\r\n        return this.http.post('scrobble/stop', {\r\n            ...options,\r\n            authenticated: true,\r\n            includeAppParameters: true,\r\n\r\n            body: {\r\n                ...item,\r\n                progress: progress\r\n            }\r\n        });\r\n    };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/interfaces/scrobble.js","import {isDefined} from '../core/helpers';\r\nimport Interface from './base';\r\n\r\n\r\nexport default class SearchInterface extends Interface {\r\n    lookup(type, id, options) {\r\n        if(!isDefined(type)) {\r\n            throw new Error('Invalid value provided for the \"type\" parameter');\r\n        }\r\n\r\n        if(!isDefined(id)) {\r\n            throw new Error('Invalid value provided for the \"id\" parameter');\r\n        }\r\n\r\n        return this.http.get('search', {\r\n            ...options,\r\n            params: {\r\n                'id_type': type,\r\n                'id': id\r\n            }\r\n        });\r\n    };\r\n\r\n    query(query, type, year, options) {\r\n        if(!isDefined(query)) {\r\n            throw new Error('Invalid value provided for the \"query\" parameter');\r\n        }\r\n\r\n        return this.http.get('search', {\r\n            ...options,\r\n            params: {\r\n                'query': query,\r\n                'type': type,\r\n                'year': year\r\n            }\r\n        });\r\n    };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/interfaces/search.js","import Interface from '../base';\r\n\r\n\r\nexport default class UserSettingsInterface extends Interface {\r\n    get(options) {\r\n        return this.http.get('users/settings', {\r\n            ...options,\r\n            authenticated: true\r\n        });\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/interfaces/users/settings.js","module.exports = __WEBPACK_EXTERNAL_MODULE_11__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"querystring\"\n// module id = 11\n// module chunks = 0"],"sourceRoot":""}