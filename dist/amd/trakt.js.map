{"version":3,"sources":["webpack/universalModuleDefinition","webpack/bootstrap 66b02cd78239545f0cd3","./src/core/helpers.js","./src/interfaces/base.js","external \"lodash-amd/merge\"","./src/index.js","external \"whatwg-fetch\"","./src/core/http.js","./src/interfaces/index.js","./src/interfaces/oauth.js","./src/interfaces/scrobble.js","./src/interfaces/search.js","./src/interfaces/users/settings.js","external \"querystring\""],"names":["isDefined","value","isFunction","toString","call","isString","setDefaults","defaults","Interface","client","_client","http","Build","Version","Date","RefreshAt","RefreshDisableAt","fetch","console","error","Promise","Client","key","secret","options","application","name","version","date","debug","session","sessionKey","onSessionRefreshed","build","_initialized","_interfaces","_refreshing","resolve","initialize","_constructInterfaces","refresh","then","reject","Error","created_at","expires_in","warn","rem","Math","round","now","abs","_refreshSession","getSession","interfaces","result","Object","keys","forEach","prototype","refresh_token","redirect_uri","oauth","stack","fragments","baseUrl","split","names","shift","join","HttpClient","_baseUrl","path","request","method","headers","params","body","bodyType","authenticated","includeAppParameters","message","access_token","_buildUserAgent","JSON","stringify","encodeParameters","response","json","parameters","encode","filter","fragment","length","users","settings","scrobble","search","OAuthInterface","redirectUri","state","siteUrl","code","post","refreshToken","ScrobbleInterface","item","progress","SearchInterface","type","id","get","query","year","UserSettingsInterface"],"mappings":"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","file":"trakt.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash-amd/merge\"), require(\"whatwg-fetch\"), require(\"querystring\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash-amd/merge\", \"whatwg-fetch\", \"querystring\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"trakt\"] = factory(require(\"lodash-amd/merge\"), require(\"whatwg-fetch\"), require(\"querystring\"));\n\telse\n\t\troot[\"trakt\"] = factory(root[\"lodash-amd/merge\"], root[\"whatwg-fetch\"], root[\"querystring\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_11__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 12);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 66b02cd78239545f0cd3","import merge from 'lodash-amd/merge';\r\n\r\n\r\nexport function isDefined(value) {\r\n    return typeof value !== 'undefined' && value !== null;\r\n}\r\n\r\nexport function isFunction(value) {\r\n    return isDefined(value) && ({}).toString.call(value) === '[object Function]';\r\n}\r\n\r\nexport function isString(value) {\r\n    return isDefined(value) && ({}).toString.call(value) === '[object String]';\r\n}\r\n\r\nexport function setDefaults(value, defaults) {\r\n    if(!isDefined(value)) {\r\n        return defaults;\r\n    }\r\n\r\n    return merge({}, defaults, value);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/helpers.js","import {isDefined} from '../core/helpers';\r\n\r\n\r\nexport default class Interface {\r\n    constructor(client) {\r\n        this._client = isDefined(client) ? client : null;\r\n    }\r\n\r\n    get http() {\r\n        if(!isDefined(this._client)) {\r\n            return null;\r\n        }\r\n\r\n        return this._client.http;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/interfaces/base.js","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash-amd/merge\"\n// module id = 2\n// module chunks = 0","import {isDefined, isFunction, setDefaults} from './core/helpers';\r\nimport HttpClient from './core/http';\r\nimport Interfaces from './interfaces';\r\nimport Interface from './interfaces/base';\r\n\r\n\r\nexport const Build = {\r\n    Version: '2.0.0-alpha.2',\r\n    Date: '2016-10-01'\r\n};\r\n\r\nexport const RefreshAt = 7 * 24 * 60 * 60;  // Refresh token one week before expiry\r\nexport const RefreshDisableAt = -28 * 24 * 60 * 60;  // Disable refresh attempts after four weeks\r\n\r\n// Validate environment\r\nif(!isDefined(fetch)) {\r\n    console.error('\"fetch\" is not available, include whatwg-fetch to support this environment');\r\n}\r\n\r\nif(!isDefined(Promise)) {\r\n    console.error('\"Promise\" is not available, include babel-polyfill to support this environment');\r\n}\r\n\r\nexport class Client {\r\n    constructor(key, secret, options) {\r\n        options = setDefaults(options, {\r\n            application: {\r\n                name: 'trakt.js',\r\n                version: Build.Version,\r\n                date: Build.Date\r\n            },\r\n\r\n            debug: false,\r\n\r\n            session: null,\r\n            sessionKey: null,\r\n            onSessionRefreshed: null\r\n        });\r\n\r\n        // Application keys\r\n        this.key = key || null;\r\n        this.secret = secret || null;\r\n\r\n        // Session\r\n        this.session = null;\r\n\r\n        if(isDefined(options.session)) {\r\n            this.session = options.session;\r\n        } else if(isDefined(options.sessionKey)) {\r\n            this.session = {key: options.sessionKey};\r\n        }\r\n\r\n        // Callbacks\r\n        this.onSessionRefreshed = options.onSessionRefreshed;\r\n\r\n        // Public variables\r\n        this.application = options.application;\r\n        this.build = Build;\r\n        this.debug = options.debug;\r\n\r\n        this.http = null;\r\n\r\n        // Private variables\r\n        this._initialized = false;\r\n        this._interfaces = {};\r\n        this._refreshing = Promise.resolve();\r\n\r\n        // Initialize client\r\n        this.initialize();\r\n    }\r\n\r\n    initialize() {\r\n        if(this._initialized) {\r\n            return;\r\n        }\r\n\r\n        // Construct http client\r\n        this.http = new HttpClient(this);\r\n\r\n        // Construct interfaces\r\n        this._interfaces = this._constructInterfaces(Interfaces);\r\n\r\n        // Mark client as initialized\r\n        this._initialized = true;\r\n    }\r\n\r\n    get siteUrl() {\r\n        var fragments = this.http.baseUrl.split('://'),\r\n            names = fragments[1].split('.');\r\n\r\n        // Remove first name ('api' or 'api-v2launch')\r\n        names.shift();\r\n\r\n        return [fragments[0], names.join('.')].join('://');\r\n    }\r\n\r\n    // region Interfaces\r\n\r\n    get users() {\r\n        return this._interfaces['users'];\r\n    }\r\n\r\n    get oauth() {\r\n        return this._interfaces['oauth'];\r\n    }\r\n\r\n    get scrobble() {\r\n        return this._interfaces['scrobble'];\r\n    }\r\n\r\n    get search() {\r\n        return this._interfaces['search'];\r\n    }\r\n\r\n    // endregion\r\n\r\n    // region Public methods\r\n\r\n    getSession(options) {\r\n        options = setDefaults(options, {\r\n            refresh: true\r\n        });\r\n\r\n        return this._refreshing.then(() => {\r\n            var session = this.session;\r\n\r\n            if(!isDefined(session)) {\r\n                return Promise.reject(new Error('No session available'));\r\n            }\r\n\r\n            if(isFunction(session)) {\r\n                session = session();\r\n            }\r\n\r\n            // Resolve session\r\n            return Promise.resolve(session).then((session) => {\r\n                if(!isDefined(session)) {\r\n                    return Promise.reject(new Error('No session available'));\r\n                }\r\n\r\n                if(!isDefined(session.created_at) || !isDefined(session.expires_in)) {\r\n                    console.warn('Missing session expiry properties, unable to determine session validity');\r\n                }\r\n\r\n                // Calculate seconds to/since session expire time\r\n                let rem = Math.round((session.created_at + session.expires_in) - (Date.now() / 1000));\r\n\r\n                if(rem > RefreshAt) {\r\n                    // Ensure the \"onSessionRefreshed\" callback has been defined\r\n                    if(!isDefined(this.onSessionRefreshed)) {\r\n                        console.warn(\r\n                            'onSessionRefreshed callback hasn\\'t been implemented, session will expire in %d second(s)',\r\n                            Math.round(rem)\r\n                        );\r\n                    }\r\n                } else {\r\n                    if(rem < RefreshDisableAt) {\r\n                        // Session has expired, and no `onSessionRefreshed` callback has been defined\r\n                        return Promise.reject(new Error(\r\n                            'Session expired ' + Math.round(Math.abs(rem)) + ' second(s) ago'\r\n                        ));\r\n                    }\r\n\r\n                    if(!isDefined(this.onSessionRefreshed)) {\r\n                        if(rem < 0) {\r\n                            // Session has expired\r\n                            return Promise.reject(new Error(\r\n                                'Session expired ' + Math.round(Math.abs(rem)) + ' second(s) ago'\r\n                            ));\r\n                        }\r\n\r\n                        console.warn('onSessionRefreshed callback hasn\\'t been implemented, unable to refresh session');\r\n                        return session;\r\n                    }\r\n\r\n                    if(rem < 0) {\r\n                        // Session has expired, and no `onSessionRefreshed` callback has been defined\r\n                        console.warn('Session expired ' + Math.round(Math.abs(rem)) + ' second(s) ago');\r\n                    }\r\n\r\n                    if(!options.refresh) {\r\n                        console.warn('Token refresh has been disabled');\r\n                        return session;\r\n                    }\r\n\r\n                    // Refresh authentication token\r\n                    this._refreshing = this._refreshSession(session);\r\n\r\n                    // Wait for token to refresh, then try retrieve the session again\r\n                    return this._refreshing.then(() => {\r\n                        return this.getSession({\r\n                            refresh: false\r\n                        });\r\n                    });\r\n                }\r\n\r\n                // Return current session\r\n                return session;\r\n            });\r\n        });\r\n    }\r\n\r\n    // endregion\r\n\r\n    // region Private methods\r\n\r\n    _constructInterfaces(interfaces) {\r\n        var result = {};\r\n        var value;\r\n\r\n        Object.keys(interfaces).forEach((key) => {\r\n            value = interfaces[key];\r\n\r\n            if(value.prototype instanceof Interface) {\r\n                result[key] = new value(this);  // eslint-disable-line new-cap\r\n            } else {\r\n                result[key] = this._constructInterfaces(value);\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    _refreshSession(session) {\r\n        if(!isDefined(session) || !isDefined(session.refresh_token)) {\r\n            // Unable to refresh session\r\n            return Promise.reject(new Error(\r\n                'Unable to refresh session, no \"refresh_token\" property is available'\r\n            ));\r\n        }\r\n\r\n        if(!isDefined(session.redirect_uri)) {\r\n            console.warn('Session has no \"redirect_uri\" property, defaulting to \"urn:ietf:wg:oauth:2.0:oob\"');\r\n        }\r\n\r\n        if(!isDefined(this.onSessionRefreshed)) {\r\n            return Promise.reject(new Error(\r\n                'Unable to refresh session, onSessionRefreshed callback hasn\\'t been implemented'\r\n            ));\r\n        }\r\n\r\n        // Refresh session\r\n        return this.oauth.refresh(session.refresh_token, session.redirect_uri).then((session) => {\r\n            if(!isDefined(this.onSessionRefreshed)) {\r\n                return;\r\n            }\r\n\r\n            // Fire \"onSessionRefreshed\" callback\r\n            this.onSessionRefreshed(session);\r\n        }, (error) => {\r\n            console.error('Unable to refresh session:', error.stack);\r\n        });\r\n    }\r\n\r\n    // endregion\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"whatwg-fetch\"\n// module id = 4\n// module chunks = 0","import merge from 'lodash-amd/merge';\r\nimport querystring from 'querystring';\r\n\r\nimport {isDefined} from './helpers';\r\n\r\n\r\nexport default class HttpClient {\r\n    constructor(client, baseUrl) {\r\n        this._client = client;\r\n        this._baseUrl = baseUrl || 'https://api.trakt.tv/';\r\n    }\r\n\r\n    get baseUrl() {\r\n        return this._baseUrl;\r\n    }\r\n\r\n    get(path, options) {\r\n        return this.request('GET', path, options);\r\n    }\r\n\r\n    post(path, options) {\r\n        return this.request('POST', path, options);\r\n    }\r\n\r\n    request(method, path, options) {\r\n        options = merge({\r\n            headers: {},\r\n            params: {},\r\n\r\n            // Body\r\n            body: null,\r\n            bodyType: 'json',\r\n\r\n            // Authentication\r\n            authenticated: false,\r\n            session: null,\r\n\r\n            // Application\r\n            application: null,\r\n            includeAppParameters: false\r\n        }, options || {});\r\n\r\n        if(!isDefined(options.application)) {\r\n            options.application = this._client.application;\r\n        }\r\n\r\n        // Set request headers\r\n        options.headers['trakt-api-key'] = this._client.key;\r\n        options.headers['trakt-api-version'] = 2;\r\n\r\n        // Authentication\r\n        if(options.authenticated) {\r\n            if(!isDefined(options.session)) {\r\n                // Retrieve current client session\r\n                return this._client.getSession().then((session) => {\r\n                    if(!isDefined(session)) {\r\n                        // Invalid session returned\r\n                        return Promise.reject(new Error(\r\n                            'Authentication required, but an invalid session was returned'\r\n                        ));\r\n                    }\r\n\r\n                    // Fire request with `session`\r\n                    return this.request(method, path, {\r\n                        ...options,\r\n                        session: session\r\n                    });\r\n                }, (error) => {\r\n                    // No session available\r\n                    return Promise.reject(new Error(\r\n                        'Authentication required, but no session is available (error: ' + error.message + ')'\r\n                    ));\r\n                });\r\n            }\r\n\r\n            // Validate session\r\n            if(!isDefined(options.session.access_token)) {\r\n                return Promise.reject(new Error(\r\n                    'Invalid session provided, expected an object with the \"access_token\" property'\r\n                ));\r\n            }\r\n\r\n            // Set authorization header\r\n            options.headers['Authorization'] = 'Bearer ' + options.session.access_token;\r\n        }\r\n\r\n        // Application metadata\r\n        if(!isDefined(options.application)) {\r\n            options.application = {\r\n                name: 'trakt.js',\r\n                version: this._client.build.version,\r\n                date: this._client.build.date\r\n            };\r\n        }\r\n\r\n        // Application parameters\r\n        if(options.includeAppParameters === true) {\r\n            // Validate request method\r\n            if(method !== 'POST') {\r\n                return Promise.reject(new Error(\r\n                    '\"includeAppParameters\" can only be used with POST requests'\r\n                ));\r\n            }\r\n\r\n            // Version\r\n            if(isDefined(options.application.version)) {\r\n                options.body['app_version'] = options.application.version;\r\n            }\r\n\r\n            // Date\r\n            if(isDefined(options.application.date)) {\r\n                options.body['app_date'] = options.application.date;\r\n            }\r\n        }\r\n\r\n        // User Agent\r\n        options.headers['User-Agent'] = this._buildUserAgent(options.application);\r\n\r\n        // Process body\r\n        if(isDefined(options.body)) {\r\n            // Encode body as `bodyType`\r\n            if(options.bodyType === 'json') {\r\n                options.body = JSON.stringify(options.body);\r\n                options.headers['Content-Type'] = 'application/json';\r\n            } else {\r\n                throw new Error('Invalid \"bodyType\" provided: \"' + options.bodyType + '\"');\r\n            }\r\n        }\r\n\r\n        if(this._client.debug) {\r\n            console.debug('[trakt.js] %s %o (options: %O)', method, path, options);\r\n        }\r\n\r\n        // Send request\r\n        return fetch(this._baseUrl + path + '?' + this.encodeParameters(options.params), {\r\n            method: method,\r\n            headers: options.headers,\r\n            body: options.body\r\n        }).then(function(response) {\r\n            // TODO check status code\r\n            return response.json();\r\n        });\r\n    }\r\n\r\n    encodeParameters(parameters) {\r\n        // Remove undefined parameters\r\n        Object.keys(parameters).forEach((key) => {\r\n            if(typeof parameters[key] === 'undefined') {\r\n                delete parameters[key];\r\n            }\r\n        });\r\n\r\n        // Encode parameters to string\r\n        return querystring.encode(parameters);\r\n    }\r\n\r\n    _buildUserAgent(application) {\r\n        let result = '';\r\n\r\n        // Add application name (or \"Unknown\")\r\n        if(isDefined(application.name)) {\r\n            result += application.name;\r\n        } else {\r\n            result += 'Unknown';\r\n        }\r\n\r\n        // Add fragments (version, date)\r\n        let fragments = [\r\n            application.version,\r\n            application.date\r\n        ].filter((fragment) => {\r\n            return isDefined(fragment);\r\n        });\r\n\r\n        if(fragments.length < 1) {\r\n            return result;\r\n        }\r\n\r\n        return result + ' (' + fragments.join('; ') + ')';\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/http.js","import _UserSettingsInterface from './users/settings';\r\nimport _OAuthInterface from './oauth';\r\nimport _ScrobbleInterface from './scrobble';\r\nimport _SearchInterface from './search';\r\n\r\n\r\nexport {_UserSettingsInterface as UserSettingsInterface};\r\nexport {_OAuthInterface as OAuthInterface};\r\nexport {_ScrobbleInterface as ScrobbleInterface};\r\nexport {_SearchInterface as SearchInterface};\r\n\r\nexport default {\r\n    users: {\r\n        settings: _UserSettingsInterface\r\n    },\r\n\r\n    oauth: _OAuthInterface,\r\n    scrobble: _ScrobbleInterface,\r\n    search: _SearchInterface\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/interfaces/index.js","import {isDefined} from '../core/helpers';\r\nimport Interface from './base';\r\n\r\n\r\nexport default class OAuthInterface extends Interface {\r\n    authorizeUrl(redirectUri, state) {\r\n        if(!isDefined(this._client.key)) {\r\n            throw new Error('Missing required client \"key\" parameter');\r\n        }\r\n\r\n        return this._client.siteUrl + 'oauth/authorize?' + this.http.encodeParameters({\r\n            'client_id': this._client.key,\r\n\r\n            'response_type': 'code',\r\n            'redirect_uri': isDefined(redirectUri) ? redirectUri : 'urn:ietf:wg:oauth:2.0:oob',\r\n            'state': state\r\n        });\r\n    }\r\n\r\n    exchange(code, redirectUri, options) {\r\n        if(!isDefined(this._client.key)) {\r\n            throw new Error('Missing required client \"key\" parameter');\r\n        }\r\n\r\n        if(!isDefined(this._client.secret)) {\r\n            throw new Error('Missing required client \"secret\" parameter');\r\n        }\r\n\r\n        if(!isDefined(code)) {\r\n            throw new Error('Invalid value provided for the \"code\" parameter');\r\n        }\r\n\r\n        if(!isDefined(redirectUri)) {\r\n            redirectUri = 'urn:ietf:wg:oauth:2.0:oob';\r\n        }\r\n\r\n        return this.http.post('oauth/token', {\r\n            ...options,\r\n            body: {\r\n                'client_id': this._client.key,\r\n                'client_secret': this._client.secret,\r\n\r\n                'code': code,\r\n                'redirect_uri': redirectUri,\r\n                'grant_type': 'authorization_code'\r\n            }\r\n        }).then((session) => {\r\n            if(!isDefined(session)) {\r\n                return session;\r\n            }\r\n\r\n            session['redirect_uri'] = redirectUri;\r\n            return session;\r\n        });\r\n    }\r\n\r\n    refresh(refreshToken, redirectUri, options) {\r\n        if(!isDefined(this._client.key)) {\r\n            throw new Error('Missing required client \"key\" parameter');\r\n        }\r\n\r\n        if(!isDefined(this._client.secret)) {\r\n            throw new Error('Missing required client \"secret\" parameter');\r\n        }\r\n\r\n        if(!isDefined(refreshToken)) {\r\n            throw new Error('Invalid value provided for the \"code\" parameter');\r\n        }\r\n\r\n        return this.http.post('oauth/token', {\r\n            ...options,\r\n            body: {\r\n                'client_id': this._client.key,\r\n                'client_secret': this._client.secret,\r\n\r\n                'refresh_token': refreshToken,\r\n                'redirect_uri': isDefined(redirectUri) ? redirectUri : 'urn:ietf:wg:oauth:2.0:oob',\r\n                'grant_type': 'refresh_token'\r\n            }\r\n        });\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/interfaces/oauth.js","import Interface from './base';\r\n\r\n\r\nexport default class ScrobbleInterface extends Interface {\r\n    start(item, progress, options) {\r\n        return this.http.post('scrobble/start', {\r\n            ...options,\r\n            authenticated: true,\r\n            includeAppParameters: true,\r\n\r\n            body: {\r\n                ...item,\r\n                progress: progress\r\n            }\r\n        });\r\n    };\r\n\r\n    pause(item, progress, options) {\r\n        return this.http.post('scrobble/pause', {\r\n            ...options,\r\n            authenticated: true,\r\n            includeAppParameters: true,\r\n\r\n            body: {\r\n                ...item,\r\n                progress: progress\r\n            }\r\n        });\r\n    };\r\n\r\n    stop(item, progress, options) {\r\n        return this.http.post('scrobble/stop', {\r\n            ...options,\r\n            authenticated: true,\r\n            includeAppParameters: true,\r\n\r\n            body: {\r\n                ...item,\r\n                progress: progress\r\n            }\r\n        });\r\n    };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/interfaces/scrobble.js","import {isDefined} from '../core/helpers';\r\nimport Interface from './base';\r\n\r\n\r\nexport default class SearchInterface extends Interface {\r\n    lookup(type, id, options) {\r\n        if(!isDefined(type)) {\r\n            throw new Error('Invalid value provided for the \"type\" parameter');\r\n        }\r\n\r\n        if(!isDefined(id)) {\r\n            throw new Error('Invalid value provided for the \"id\" parameter');\r\n        }\r\n\r\n        return this.http.get('search', {\r\n            ...options,\r\n            params: {\r\n                'id_type': type,\r\n                'id': id\r\n            }\r\n        });\r\n    };\r\n\r\n    query(query, type, year, options) {\r\n        if(!isDefined(query)) {\r\n            throw new Error('Invalid value provided for the \"query\" parameter');\r\n        }\r\n\r\n        return this.http.get('search', {\r\n            ...options,\r\n            params: {\r\n                'query': query,\r\n                'type': type,\r\n                'year': year\r\n            }\r\n        });\r\n    };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/interfaces/search.js","import Interface from '../base';\r\n\r\n\r\nexport default class UserSettingsInterface extends Interface {\r\n    get(options) {\r\n        return this.http.get('users/settings', {\r\n            ...options,\r\n            authenticated: true\r\n        });\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/interfaces/users/settings.js","module.exports = __WEBPACK_EXTERNAL_MODULE_11__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"querystring\"\n// module id = 11\n// module chunks = 0"],"sourceRoot":""}