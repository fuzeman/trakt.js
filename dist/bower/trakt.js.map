{"version":3,"sources":["webpack/universalModuleDefinition","webpack/bootstrap f3c240d72492dd94bf0d","./src/index.js","./src/core/helpers.js","external \"lodash-amd/object/merge\"","./src/core/http.js","external \"querystring\"","./src/interfaces/index.js","./src/interfaces/users/settings.js","./src/interfaces/base.js","./src/interfaces/oauth.js","./src/interfaces/scrobble.js","./src/interfaces/search.js"],"names":["Build","Version","Date","RefreshAt","RefreshDisableAt","fetch","console","error","Promise","Client","key","secret","options","debug","onSessionRefreshed","session","sessionKey","application","name","version","date","build","http","_initialized","_interfaces","_refreshing","resolve","initialize","_constructInterfaces","refresh","then","reject","Error","created_at","expires_in","warn","rem","Math","round","now","abs","_refreshSession","getSession","interfaces","result","value","Object","keys","forEach","prototype","refresh_token","redirect_uri","oauth","stack","fragments","baseUrl","split","names","shift","join","isDefined","isFunction","isString","setDefaults","toString","call","defaults","HttpClient","client","_client","_baseUrl","path","request","method","headers","params","body","bodyType","authenticated","includeAppParameters","message","access_token","_buildUserAgent","JSON","stringify","encodeParameters","response","json","parameters","encode","filter","fragment","length","UserSettingsInterface","OAuthInterface","ScrobbleInterface","SearchInterface","users","settings","scrobble","search","get","Interface","redirectUri","state","siteUrl","code","post","refreshToken","item","progress","type","id","query","year"],"mappings":"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","file":"trakt.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash-amd/object/merge\"), require(\"querystring\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash-amd/object/merge\", \"querystring\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"trakt\"] = factory(require(\"lodash-amd/object/merge\"), require(\"querystring\"));\n\telse\n\t\troot[\"trakt\"] = factory(root[\"lodash-amd/object/merge\"], root[\"querystring\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_5__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap f3c240d72492dd94bf0d\n **/","import {isDefined, isFunction, setDefaults} from './core/helpers';\r\nimport HttpClient from './core/http';\r\nimport Interfaces from './interfaces';\r\nimport Interface from './interfaces/base';\r\n\r\nexport const Build = {\r\n    Version: '2.0.0-alpha.2',\r\n    Date: '2016-10-01'\r\n};\r\n\r\nexport const RefreshAt = 7 * 24 * 60 * 60;  // Refresh token one week before expiry\r\nexport const RefreshDisableAt = -28 * 24 * 60 * 60;  // Disable refresh attempts after four weeks\r\n\r\n// Validate environment\r\nif(!isDefined(fetch)) {\r\n    console.error('\"fetch\" is not available, include whatwg-fetch to support this environment');\r\n}\r\n\r\nif(!isDefined(Promise)) {\r\n    console.error('\"Promise\" is not available, include babel-polyfill to support this environment');\r\n}\r\n\r\nexport class Client {\r\n    constructor(key, secret, options) {\r\n        options = setDefaults(options, {\r\n            debug: false,\r\n\r\n            onSessionRefreshed: null,\r\n\r\n            session: null,\r\n            sessionKey: null\r\n        });\r\n\r\n        // Application keys\r\n        this.key = key || null;\r\n        this.secret = secret || null;\r\n\r\n        // Application metadata\r\n        this.application = {\r\n            name: 'trakt.js',\r\n            version: Build.Version,\r\n            date: Build.Date\r\n        };\r\n\r\n        // Build metadata\r\n        this.build = Build;\r\n\r\n        // Session\r\n        this.session = null;\r\n\r\n        if(isDefined(options.session)) {\r\n            this.session = options.session;\r\n        } else if(isDefined(options.sessionKey)) {\r\n            this.session = {key: options.sessionKey};\r\n        }\r\n\r\n        // Callbacks\r\n        this.onSessionRefreshed = options.onSessionRefreshed;\r\n\r\n        // Public variables\r\n        this.debug = options.debug;\r\n        this.http = null;\r\n\r\n        // Private variables\r\n        this._initialized = false;\r\n        this._interfaces = {};\r\n        this._refreshing = Promise.resolve();\r\n\r\n        // Initialize client\r\n        this.initialize();\r\n    }\r\n\r\n    initialize() {\r\n        if(this._initialized) {\r\n            return;\r\n        }\r\n\r\n        // Construct http client\r\n        this.http = new HttpClient(this);\r\n\r\n        // Construct interfaces\r\n        this._interfaces = this._constructInterfaces(Interfaces);\r\n\r\n        // Mark client as initialized\r\n        this._initialized = true;\r\n    }\r\n\r\n    get siteUrl() {\r\n        var fragments = this.http.baseUrl.split('://'),\r\n            names = fragments[1].split('.');\r\n\r\n        // Remove first name ('api' or 'api-v2launch')\r\n        names.shift();\r\n\r\n        return [fragments[0], names.join('.')].join('://');\r\n    }\r\n\r\n    // region Interfaces\r\n\r\n    get users() {\r\n        return this._interfaces['users'];\r\n    }\r\n\r\n    get oauth() {\r\n        return this._interfaces['oauth'];\r\n    }\r\n\r\n    get scrobble() {\r\n        return this._interfaces['scrobble'];\r\n    }\r\n\r\n    get search() {\r\n        return this._interfaces['search'];\r\n    }\r\n\r\n    // endregion\r\n\r\n    // region Public methods\r\n\r\n    getSession(options) {\r\n        options = setDefaults(options, {\r\n            refresh: true\r\n        });\r\n\r\n        return this._refreshing.then(() => {\r\n            var session = this.session;\r\n\r\n            if(!isDefined(session)) {\r\n                return Promise.reject(new Error('No session available'));\r\n            }\r\n\r\n            if(isFunction(session)) {\r\n                session = session();\r\n            }\r\n\r\n            // Resolve session\r\n            return Promise.resolve(session).then((session) => {\r\n                if(!isDefined(session)) {\r\n                    return Promise.reject(new Error('No session available'));\r\n                }\r\n\r\n                if(!isDefined(session.created_at) || !isDefined(session.expires_in)) {\r\n                    console.warn('Missing session expiry properties, unable to determine session validity');\r\n                }\r\n\r\n                // Calculate seconds to/since session expire time\r\n                let rem = Math.round((session.created_at + session.expires_in) - (Date.now() / 1000));\r\n\r\n                if(rem > RefreshAt) {\r\n                    // Ensure the \"onSessionRefreshed\" callback has been defined\r\n                    if(!isDefined(this.onSessionRefreshed)) {\r\n                        console.warn(\r\n                            'onSessionRefreshed callback hasn\\'t been implemented, session will expire in %d second(s)',\r\n                            Math.round(rem)\r\n                        );\r\n                    }\r\n                } else {\r\n                    if(rem < RefreshDisableAt) {\r\n                        // Session has expired, and no `onSessionRefreshed` callback has been defined\r\n                        return Promise.reject(new Error(\r\n                            'Session expired ' + Math.round(Math.abs(rem)) + ' second(s) ago'\r\n                        ));\r\n                    }\r\n\r\n                    if(!isDefined(this.onSessionRefreshed)) {\r\n                        if(rem < 0) {\r\n                            // Session has expired\r\n                            return Promise.reject(new Error(\r\n                                'Session expired ' + Math.round(Math.abs(rem)) + ' second(s) ago'\r\n                            ));\r\n                        }\r\n\r\n                        console.warn('onSessionRefreshed callback hasn\\'t been implemented, unable to refresh session');\r\n                        return session;\r\n                    }\r\n\r\n                    if(rem < 0) {\r\n                        // Session has expired, and no `onSessionRefreshed` callback has been defined\r\n                        console.warn('Session expired ' + Math.round(Math.abs(rem)) + ' second(s) ago');\r\n                    }\r\n\r\n                    if(!options.refresh) {\r\n                        console.warn('Token refresh has been disabled');\r\n                        return session;\r\n                    }\r\n\r\n                    // Refresh authentication token\r\n                    this._refreshing = this._refreshSession(session);\r\n\r\n                    // Wait for token to refresh, then try retrieve the session again\r\n                    return this._refreshing.then(() => {\r\n                        return this.getSession({\r\n                            refresh: false\r\n                        });\r\n                    });\r\n                }\r\n\r\n                // Return current session\r\n                return session;\r\n            });\r\n        });\r\n    }\r\n\r\n    // endregion\r\n\r\n    // region Private methods\r\n\r\n    _constructInterfaces(interfaces) {\r\n        var result = {};\r\n        var value;\r\n\r\n        Object.keys(interfaces).forEach((key) => {\r\n            value = interfaces[key];\r\n\r\n            if(value.prototype instanceof Interface) {\r\n                result[key] = new value(this);  // eslint-disable-line new-cap\r\n            } else {\r\n                result[key] = this._constructInterfaces(value);\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    _refreshSession(session) {\r\n        if(!isDefined(session) || !isDefined(session.refresh_token)) {\r\n            // Unable to refresh session\r\n            return Promise.reject(new Error(\r\n                'Unable to refresh session, no \"refresh_token\" property is available'\r\n            ));\r\n        }\r\n\r\n        if(!isDefined(session.redirect_uri)) {\r\n            console.warn('Session has no \"redirect_uri\" property, defaulting to \"urn:ietf:wg:oauth:2.0:oob\"');\r\n        }\r\n\r\n        if(!isDefined(this.onSessionRefreshed)) {\r\n            return Promise.reject(new Error(\r\n                'Unable to refresh session, onSessionRefreshed callback hasn\\'t been implemented'\r\n            ));\r\n        }\r\n\r\n        // Refresh session\r\n        return this.oauth.refresh(session.refresh_token, session.redirect_uri).then((session) => {\r\n            if(!isDefined(this.onSessionRefreshed)) {\r\n                return;\r\n            }\r\n\r\n            // Fire \"onSessionRefreshed\" callback\r\n            this.onSessionRefreshed(session);\r\n        }, (error) => {\r\n            console.error('Unable to refresh session:', error.stack);\r\n        });\r\n    }\r\n\r\n    // endregion\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ~/eslint-loader!./src/index.js\n **/","import merge from 'lodash-amd/merge';\r\n\r\nexport function isDefined(value) {\r\n    return typeof value !== 'undefined' && value !== null;\r\n}\r\n\r\nexport function isFunction(value) {\r\n    return isDefined(value) && ({}).toString.call(value) === '[object Function]';\r\n}\r\n\r\nexport function isString(value) {\r\n    return isDefined(value) && ({}).toString.call(value) === '[object String]';\r\n}\r\n\r\nexport function setDefaults(value, defaults) {\r\n    if(!isDefined(value)) {\r\n        return defaults;\r\n    }\r\n\r\n    return merge({}, defaults, value);\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ~/eslint-loader!./src/core/helpers.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"lodash-amd/object/merge\"\n ** module id = 3\n ** module chunks = 0\n **/","import {isDefined} from './helpers';\r\n\r\nimport merge from 'lodash-amd/merge';\r\nimport querystring from 'querystring';\r\n\r\nexport default class HttpClient {\r\n    constructor(client, baseUrl) {\r\n        this._client = client;\r\n        this._baseUrl = baseUrl || 'https://api.trakt.tv/';\r\n    }\r\n\r\n    get baseUrl() {\r\n        return this._baseUrl;\r\n    }\r\n\r\n    get(path, options) {\r\n        return this.request('GET', path, options);\r\n    }\r\n\r\n    post(path, options) {\r\n        return this.request('POST', path, options);\r\n    }\r\n\r\n    request(method, path, options) {\r\n        options = merge({\r\n            headers: {},\r\n            params: {},\r\n\r\n            // Body\r\n            body: null,\r\n            bodyType: 'json',\r\n\r\n            // Authentication\r\n            authenticated: false,\r\n            session: null,\r\n\r\n            // Application\r\n            application: null,\r\n            includeAppParameters: false\r\n        }, options || {});\r\n\r\n        if(!isDefined(options.application)) {\r\n            options.application = this._client.application;\r\n        }\r\n\r\n        // Set request headers\r\n        options.headers['trakt-api-key'] = this._client.key;\r\n        options.headers['trakt-api-version'] = 2;\r\n\r\n        // Authentication\r\n        if(options.authenticated) {\r\n            if(!isDefined(options.session)) {\r\n                // Retrieve current client session\r\n                return this._client.getSession().then((session) => {\r\n                    if(!isDefined(session)) {\r\n                        // Invalid session returned\r\n                        return Promise.reject(new Error(\r\n                            'Authentication required, but an invalid session was returned'\r\n                        ));\r\n                    }\r\n\r\n                    // Fire request with `session`\r\n                    return this.request(method, path, {\r\n                        ...options,\r\n                        session: session\r\n                    });\r\n                }, (error) => {\r\n                    // No session available\r\n                    return Promise.reject(new Error(\r\n                        'Authentication required, but no session is available (error: ' + error.message + ')'\r\n                    ));\r\n                });\r\n            }\r\n\r\n            // Validate session\r\n            if(!isDefined(options.session.access_token)) {\r\n                return Promise.reject(new Error(\r\n                    'Invalid session provided, expected an object with the \"access_token\" property'\r\n                ));\r\n            }\r\n\r\n            // Set authorization header\r\n            options.headers['Authorization'] = 'Bearer ' + options.session.access_token;\r\n        }\r\n\r\n        // Application metadata\r\n        if(!isDefined(options.application)) {\r\n            options.application = {\r\n                name: 'trakt.js',\r\n                version: this._client.build.version,\r\n                date: this._client.build.date\r\n            };\r\n        }\r\n\r\n        // Application parameters\r\n        if(options.includeAppParameters === true) {\r\n            // Validate request method\r\n            if(method !== 'POST') {\r\n                return Promise.reject(new Error(\r\n                    '\"includeAppParameters\" can only be used with POST requests'\r\n                ));\r\n            }\r\n\r\n            // Version\r\n            if(isDefined(options.application.version)) {\r\n                options.body['app_version'] = options.application.version;\r\n            }\r\n\r\n            // Date\r\n            if(isDefined(options.application.date)) {\r\n                options.body['app_date'] = options.application.date;\r\n            }\r\n        }\r\n\r\n        // User Agent\r\n        options.headers['User-Agent'] = this._buildUserAgent(options.application);\r\n\r\n        // Process body\r\n        if(isDefined(options.body)) {\r\n            // Encode body as `bodyType`\r\n            if(options.bodyType === 'json') {\r\n                options.body = JSON.stringify(options.body);\r\n                options.headers['Content-Type'] = 'application/json';\r\n            } else {\r\n                throw new Error('Invalid \"bodyType\" provided: \"' + options.bodyType + '\"');\r\n            }\r\n        }\r\n\r\n        if(this._client.debug) {\r\n            console.debug('[trakt.js] %s %o (options: %O)', method, path, options);\r\n        }\r\n\r\n        // Send request\r\n        return fetch(this._baseUrl + path + '?' + this.encodeParameters(options.params), {\r\n            method: method,\r\n            headers: options.headers,\r\n            body: options.body\r\n        }).then(function(response) {\r\n            // TODO check status code\r\n            return response.json();\r\n        });\r\n    }\r\n\r\n    encodeParameters(parameters) {\r\n        // Remove undefined parameters\r\n        Object.keys(parameters).forEach((key) => {\r\n            if(typeof parameters[key] === 'undefined') {\r\n                delete parameters[key];\r\n            }\r\n        });\r\n\r\n        // Encode parameters to string\r\n        return querystring.encode(parameters);\r\n    }\r\n\r\n    _buildUserAgent(application) {\r\n        let result = '';\r\n\r\n        // Add application name (or \"Unknown\")\r\n        if(isDefined(application.name)) {\r\n            result += application.name;\r\n        } else {\r\n            result += 'Unknown';\r\n        }\r\n\r\n        // Add fragments (version, date)\r\n        let fragments = [\r\n            application.version,\r\n            application.date\r\n        ].filter((fragment) => {\r\n            return isDefined(fragment);\r\n        });\r\n\r\n        if(fragments.length < 1) {\r\n            return result;\r\n        }\r\n\r\n        return result + ' (' + fragments.join('; ') + ')';\r\n    }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ~/eslint-loader!./src/core/http.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"querystring\"\n ** module id = 5\n ** module chunks = 0\n **/","import _UserSettingsInterface from './users/settings';\r\nimport _OAuthInterface from './oauth';\r\nimport _ScrobbleInterface from './scrobble';\r\nimport _SearchInterface from './search';\r\n\r\nexport {_UserSettingsInterface as UserSettingsInterface};\r\nexport {_OAuthInterface as OAuthInterface};\r\nexport {_ScrobbleInterface as ScrobbleInterface};\r\nexport {_SearchInterface as SearchInterface};\r\n\r\nexport default {\r\n    users: {\r\n        settings: _UserSettingsInterface\r\n    },\r\n\r\n    oauth: _OAuthInterface,\r\n    scrobble: _ScrobbleInterface,\r\n    search: _SearchInterface\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ~/eslint-loader!./src/interfaces/index.js\n **/","import Interface from '../base';\r\n\r\nexport default class UserSettingsInterface extends Interface {\r\n    get(options) {\r\n        return this.http.get('users/settings', {\r\n            ...options,\r\n            authenticated: true\r\n        });\r\n    }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ~/eslint-loader!./src/interfaces/users/settings.js\n **/","import {isDefined} from '../core/helpers';\r\n\r\nexport default class Interface {\r\n    constructor(client) {\r\n        this._client = isDefined(client) ? client : null;\r\n    }\r\n\r\n    get http() {\r\n        if(!isDefined(this._client)) {\r\n            return null;\r\n        }\r\n\r\n        return this._client.http;\r\n    }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ~/eslint-loader!./src/interfaces/base.js\n **/","import {isDefined} from '../core/helpers';\r\nimport Interface from './base';\r\n\r\nexport default class OAuthInterface extends Interface {\r\n    authorizeUrl(redirectUri, state) {\r\n        if(!isDefined(this._client.key)) {\r\n            throw new Error('Missing required client \"key\" parameter');\r\n        }\r\n\r\n        return this._client.siteUrl + 'oauth/authorize?' + this.http.encodeParameters({\r\n            'client_id': this._client.key,\r\n\r\n            'response_type': 'code',\r\n            'redirect_uri': isDefined(redirectUri) ? redirectUri : 'urn:ietf:wg:oauth:2.0:oob',\r\n            'state': state\r\n        });\r\n    }\r\n\r\n    exchange(code, redirectUri, options) {\r\n        if(!isDefined(this._client.key)) {\r\n            throw new Error('Missing required client \"key\" parameter');\r\n        }\r\n\r\n        if(!isDefined(this._client.secret)) {\r\n            throw new Error('Missing required client \"secret\" parameter');\r\n        }\r\n\r\n        if(!isDefined(code)) {\r\n            throw new Error('Invalid value provided for the \"code\" parameter');\r\n        }\r\n\r\n        if(!isDefined(redirectUri)) {\r\n            redirectUri = 'urn:ietf:wg:oauth:2.0:oob';\r\n        }\r\n\r\n        return this.http.post('oauth/token', {\r\n            ...options,\r\n            body: {\r\n                'client_id': this._client.key,\r\n                'client_secret': this._client.secret,\r\n\r\n                'code': code,\r\n                'redirect_uri': redirectUri,\r\n                'grant_type': 'authorization_code'\r\n            }\r\n        }).then((session) => {\r\n            if(!isDefined(session)) {\r\n                return session;\r\n            }\r\n\r\n            session['redirect_uri'] = redirectUri;\r\n            return session;\r\n        });\r\n    }\r\n\r\n    refresh(refreshToken, redirectUri, options) {\r\n        if(!isDefined(this._client.key)) {\r\n            throw new Error('Missing required client \"key\" parameter');\r\n        }\r\n\r\n        if(!isDefined(this._client.secret)) {\r\n            throw new Error('Missing required client \"secret\" parameter');\r\n        }\r\n\r\n        if(!isDefined(refreshToken)) {\r\n            throw new Error('Invalid value provided for the \"code\" parameter');\r\n        }\r\n\r\n        return this.http.post('oauth/token', {\r\n            ...options,\r\n            body: {\r\n                'client_id': this._client.key,\r\n                'client_secret': this._client.secret,\r\n\r\n                'refresh_token': refreshToken,\r\n                'redirect_uri': isDefined(redirectUri) ? redirectUri : 'urn:ietf:wg:oauth:2.0:oob',\r\n                'grant_type': 'refresh_token'\r\n            }\r\n        });\r\n    }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ~/eslint-loader!./src/interfaces/oauth.js\n **/","import Interface from './base';\r\n\r\nexport default class ScrobbleInterface extends Interface {\r\n    start(item, progress, options) {\r\n        return this.http.post('scrobble/start', {\r\n            ...options,\r\n            authenticated: true,\r\n            includeAppParameters: true,\r\n\r\n            body: {\r\n                ...item,\r\n                progress: progress\r\n            }\r\n        });\r\n    };\r\n\r\n    pause(item, progress, options) {\r\n        return this.http.post('scrobble/pause', {\r\n            ...options,\r\n            authenticated: true,\r\n            includeAppParameters: true,\r\n\r\n            body: {\r\n                ...item,\r\n                progress: progress\r\n            }\r\n        });\r\n    };\r\n\r\n    stop(item, progress, options) {\r\n        return this.http.post('scrobble/stop', {\r\n            ...options,\r\n            authenticated: true,\r\n            includeAppParameters: true,\r\n\r\n            body: {\r\n                ...item,\r\n                progress: progress\r\n            }\r\n        });\r\n    };\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ~/eslint-loader!./src/interfaces/scrobble.js\n **/","import {isDefined} from '../core/helpers';\r\nimport Interface from './base';\r\n\r\nexport default class SearchInterface extends Interface {\r\n    lookup(type, id, options) {\r\n        if(!isDefined(type)) {\r\n            throw new Error('Invalid value provided for the \"type\" parameter');\r\n        }\r\n\r\n        if(!isDefined(id)) {\r\n            throw new Error('Invalid value provided for the \"id\" parameter');\r\n        }\r\n\r\n        return this.http.get('search', {\r\n            ...options,\r\n            params: {\r\n                'id_type': type,\r\n                'id': id\r\n            }\r\n        });\r\n    };\r\n\r\n    query(query, type, year, options) {\r\n        if(!isDefined(query)) {\r\n            throw new Error('Invalid value provided for the \"query\" parameter');\r\n        }\r\n\r\n        return this.http.get('search', {\r\n            ...options,\r\n            params: {\r\n                'query': query,\r\n                'type': type,\r\n                'year': year\r\n            }\r\n        });\r\n    };\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ~/eslint-loader!./src/interfaces/search.js\n **/"],"sourceRoot":""}