!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("whatwg-fetch"),require("lodash-amd/object/merge"),require("querystring")):"function"==typeof define&&define.amd?define(["whatwg-fetch","lodash-amd/object/merge","querystring"],t):"object"==typeof exports?exports.trakt=t(require("whatwg-fetch"),require("lodash-amd/object/merge"),require("querystring")):e.trakt=t(e["whatwg-fetch"],e["lodash-amd/object/merge"],e.querystring)}(this,function(e,t,n){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){n(1),e.exports=n(2)},function(t,n){t.exports=e},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3),s=n(4),a=r(s),f=n(7),c=r(f),l=n(9),p=r(l);t.Client=function(){function e(t,n,r){o(this,e),r=(0,u.isDefined)(r)?r:{},this.key=t||null,this.secret=n||null,this.session=null,(0,u.isDefined)(r.session)?this.session=r.session:(0,u.isDefined)(r.sessionKey)&&(this.session={key:r.sessionKey}),this.http=new a["default"](this),this._interfaces=this._constructInterfaces(c["default"])}return i(e,[{key:"getSessionKey",value:function(){return(0,u.isDefined)(this.session)&&(0,u.isDefined)(this.session.key)?this.session.key:null}},{key:"_constructInterfaces",value:function(e){var t,n=this,r={};return Object.keys(e).forEach(function(o){t=e[o],t.prototype instanceof p["default"]?r[o]=new t(n):r[o]=n._constructInterfaces(t)}),r}},{key:"siteUrl",get:function(){var e=this.http.baseUrl.split("://"),t=e[1].split(".");return t.shift(),[e[0],t.join(".")].join("://")}},{key:"users",get:function(){return this._interfaces.users}},{key:"oauth",get:function(){return this._interfaces.oauth}},{key:"scrobble",get:function(){return this._interfaces.scrobble}},{key:"search",get:function(){return this._interfaces.search}}]),e}()},function(e,t){"use strict";function n(e){return"undefined"!=typeof e&&null!==e}Object.defineProperty(t,"__esModule",{value:!0}),t.isDefined=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3),s=n(5),a=r(s),f=n(6),c=r(f),l=function(){function e(t,n){o(this,e),this._client=t,this._baseUrl=n||"https://api.trakt.tv/"}return i(e,[{key:"get",value:function(e,t){return this.request("GET",e,t)}},{key:"post",value:function(e,t){return this.request("POST",e,t)}},{key:"request",value:function(e,t,n){if(n=(0,a["default"])({headers:{},params:{},body:null,bodyType:"json",authenticated:!1,sessionKey:this._client.getSessionKey()},n||{}),n.headers["trakt-api-key"]=this._client.key,n.headers["trakt-api-version"]=2,n.authenticated){if(!(0,u.isDefined)(n.sessionKey))throw new Error('Missing required "sessionKey" parameter');n.headers.Authorization="Bearer "+this._client.session.access_token}if((0,u.isDefined)(n.body)){if("json"!==n.bodyType)throw new Error('Invalid "bodyType" provided: "'+n.bodyType+'"');n.body=JSON.stringify(n.body),n.headers["Content-Type"]="application/json"}return fetch(this._baseUrl+t+"?"+this.encodeParameters(n.params),{method:e,headers:n.headers,body:n.body}).then(function(e){return e.json()})}},{key:"encodeParameters",value:function(e){return Object.keys(e).forEach(function(t){"undefined"==typeof e[t]&&delete e[t]}),c["default"].encode(e)}},{key:"baseUrl",get:function(){return this._baseUrl}}]),e}();t["default"]=l,e.exports=t["default"]},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SearchInterface=t.ScrobbleInterface=t.OAuthInterface=t.UserSettingsInterface=void 0;var o=n(8),i=r(o),u=n(10),s=r(u),a=n(11),f=r(a),c=n(12),l=r(c);t.UserSettingsInterface=i["default"],t.OAuthInterface=s["default"],t.ScrobbleInterface=f["default"],t.SearchInterface=l["default"],t["default"]={users:{settings:i["default"]},oauth:s["default"],scrobble:f["default"],search:l["default"]}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(9),f=r(a),c=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),s(t,[{key:"get",value:function(e){return this.http.get("users/settings",e)}}]),t}(f["default"]);t["default"]=c,e.exports=t["default"]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3),u=function(){function e(t){r(this,e),this._client=(0,i.isDefined)(t)?t:null}return o(e,[{key:"http",get:function(){return(0,i.isDefined)(this._client)?this._client.http:null}}]),e}();t["default"]=u,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(3),f=n(9),c=r(f),l=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),s(t,[{key:"authorizeUrl",value:function(e,t){if(!(0,a.isDefined)(this._client.key))throw new Error('Missing required client "key" parameter');return this._client.siteUrl+"oauth/authorize?"+this.http.encodeParameters({client_id:this._client.key,response_type:"code",redirect_uri:(0,a.isDefined)(e)?e:"urn:ietf:wg:oauth:2.0:oob",state:t})}},{key:"token",value:function(e,t,n){if(!(0,a.isDefined)(this._client.key))throw new Error('Missing required client "key" parameter');if(!(0,a.isDefined)(this._client.secret))throw new Error('Missing required client "secret" parameter');if(!(0,a.isDefined)(e))throw new Error('Invalid value provided for the "code" parameter');return this.http.post("oauth/token",{body:{client_id:this._client.key,client_secret:this._client.secret,code:e,redirect_uri:(0,a.isDefined)(t)?t:"urn:ietf:wg:oauth:2.0:oob",grant_type:(0,a.isDefined)(n)?n:"authorization_code"}})}}]),t}(c["default"]);t["default"]=l,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(9),f=r(a),c=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),s(t,[{key:"start",value:function(e){return this.http.post("scrobble/start",{body:e})}},{key:"pause",value:function(e){return this.http.post("scrobble/pause",{body:e})}},{key:"stop",value:function(e){return this.http.post("scrobble/stop",{body:e})}}]),t}(f["default"]);t["default"]=c,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(3),f=n(9),c=r(f),l=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),s(t,[{key:"lookup",value:function(e,t){if(!(0,a.isDefined)(e))throw new Error('Invalid value provided for the "type" parameter');if(!(0,a.isDefined)(t))throw new Error('Invalid value provided for the "id" parameter');return this.http.get("search",{params:{id_type:e,id:t}})}},{key:"query",value:function(e,t,n){if(!(0,a.isDefined)(e))throw new Error('Invalid value provided for the "query" parameter');return this.http.get("search",{params:{query:e,type:t,year:n}})}}]),t}(c["default"]);t["default"]=l,e.exports=t["default"]}])});
//# sourceMappingURL=trakt.min.js.map