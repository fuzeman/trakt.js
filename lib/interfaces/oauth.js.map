{"version":3,"sources":["interfaces/oauth.js"],"names":["OAuthInterface","redirectUri","state","_client","key","Error","siteUrl","http","encodeParameters","code","grantType","secret","post","body"],"mappings":";;;;;;;;AAAA;;AACA;;;;;;;;;;;;IAEqBA,c;;;;;;;;;;;qCACJC,W,EAAaC,K,EAAO;AAC7B,gBAAG,CAAC,wBAAU,KAAKC,OAAL,CAAaC,GAAvB,CAAJ,EAAiC;AAC7B,sBAAM,IAAIC,KAAJ,CAAU,yCAAV,CAAN;AACH;;AAED,mBAAO,KAAKF,OAAL,CAAaG,OAAb,GAAuB,kBAAvB,GAA4C,KAAKC,IAAL,CAAUC,gBAAV,CAA2B;AAC1E,6BAAa,KAAKL,OAAL,CAAaC,GADgD;;AAG1E,iCAAiB,MAHyD;AAI1E,gCAAgB,wBAAUH,WAAV,IAAyBA,WAAzB,GAAuC,2BAJmB;AAK1E,yBAASC;AALiE,aAA3B,CAAnD;AAOH;;;8BAEKO,I,EAAMR,W,EAAaS,S,EAAW;AAChC,gBAAG,CAAC,wBAAU,KAAKP,OAAL,CAAaC,GAAvB,CAAJ,EAAiC;AAC7B,sBAAM,IAAIC,KAAJ,CAAU,yCAAV,CAAN;AACH;;AAED,gBAAG,CAAC,wBAAU,KAAKF,OAAL,CAAaQ,MAAvB,CAAJ,EAAoC;AAChC,sBAAM,IAAIN,KAAJ,CAAU,4CAAV,CAAN;AACH;;AAED,gBAAG,CAAC,wBAAUI,IAAV,CAAJ,EAAqB;AACjB,sBAAM,IAAIJ,KAAJ,CAAU,iDAAV,CAAN;AACH;;AAED,mBAAO,KAAKE,IAAL,CAAUK,IAAV,CAAe,aAAf,EAA8B;AACjCC,sBAAM;AACF,iCAAa,KAAKV,OAAL,CAAaC,GADxB;AAEF,qCAAiB,KAAKD,OAAL,CAAaQ,MAF5B;;AAIF,4BAAQF,IAJN;AAKF,oCAAgB,wBAAUR,WAAV,IAAyBA,WAAzB,GAAuC,2BALrD;AAMF,kCAAc,wBAAUS,SAAV,IAAuBA,SAAvB,GAAmC;AAN/C;AAD2B,aAA9B,CAAP;AAUH;;;;;;kBAtCgBV,c","file":"interfaces/oauth.js","sourcesContent":["import {isDefined} from '../core/helpers';\r\nimport Interface from './base';\r\n\r\nexport default class OAuthInterface extends Interface {\r\n    authorizeUrl(redirectUri, state) {\r\n        if(!isDefined(this._client.key)) {\r\n            throw new Error('Missing required client \"key\" parameter');\r\n        }\r\n\r\n        return this._client.siteUrl + 'oauth/authorize?' + this.http.encodeParameters({\r\n            'client_id': this._client.key,\r\n\r\n            'response_type': 'code',\r\n            'redirect_uri': isDefined(redirectUri) ? redirectUri : 'urn:ietf:wg:oauth:2.0:oob',\r\n            'state': state\r\n        });\r\n    }\r\n\r\n    token(code, redirectUri, grantType) {\r\n        if(!isDefined(this._client.key)) {\r\n            throw new Error('Missing required client \"key\" parameter');\r\n        }\r\n\r\n        if(!isDefined(this._client.secret)) {\r\n            throw new Error('Missing required client \"secret\" parameter');\r\n        }\r\n\r\n        if(!isDefined(code)) {\r\n            throw new Error('Invalid value provided for the \"code\" parameter');\r\n        }\r\n\r\n        return this.http.post('oauth/token', {\r\n            body: {\r\n                'client_id': this._client.key,\r\n                'client_secret': this._client.secret,\r\n\r\n                'code': code,\r\n                'redirect_uri': isDefined(redirectUri) ? redirectUri : 'urn:ietf:wg:oauth:2.0:oob',\r\n                'grant_type': isDefined(grantType) ? grantType : 'authorization_code'\r\n            }\r\n        });\r\n    }\r\n}\r\n"],"sourceRoot":"/source/"}